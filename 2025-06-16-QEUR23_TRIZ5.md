---
title: QEUR23_TRIZ5 - Tavilyã‚’ä½¿ã£ãŸèª²é¡Œè§£æ±º(çŸ›ç›¾æ¤œå‡º)
date: 2025-06-16
tags: ["QEUã‚·ã‚¹ãƒ†ãƒ ", "ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚¹", "Pythonè¨€èª", "Unsloth", "LLM", "ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ", "BONSAI", "LangGraph"]
excerpt: ã‚ãŸã‚‰ã—ã„LLMã®å­¦ç¿’ä½“ç³»ã‚’ç¢ºç«‹ã™ã‚‹
---

## QEUR23_TRIZ5 - Tavilyã‚’ä½¿ã£ãŸèª²é¡Œè§£æ±º(çŸ›ç›¾æ¤œå‡º)

## ï½ Vibe Codingã¯ã‚ã‚ŠãŒãŸã„ï¼ˆã¤ãã¥ãï¼‰ ï½

### ãƒ»ãƒ»ãƒ» ä¸‡åšã®ä»¶ã¯ã€ã‚‚ã†ã‚„ã‚Šã¾ã›ã‚“ ãƒ»ãƒ»ãƒ»

Då…ˆç”Ÿï¼ˆè¨­å®šå¹´é½¢65æ­³ï¼‰ï¼š â€œä»Šå›ã¯ã€ã„ã‚ˆã„ã‚ˆä¾‹ã®ä»¶ã‚’ã‚„ã‚‹ã‚“ã§ã—ã‚‡ãƒ»ãƒ»ãƒ»ï¼Ÿâ€

QEU:FOUNDERï¼ˆè¨­å®šå¹´é½¢65æ­³ï¼‰ ï¼š â€œãã‚ŒãŒã­ãƒ»ãƒ»ãƒ»â€

![imageTRIZ0-6-1](/2025-06-16-QEUR23_TRIZ5/imageTRIZ0-6-1.jpg) 

QEU:FOUNDER ï¼š â€œã‚ã¾ã‚Šã«ã‚‚ãƒã‚«ãƒã‚«ã—ããªã£ã¦ã€ã‚‚ã†ã‚„ã‚ã¾ã—ã‚‡ã†ã€‚â€

[![MOVIE1](http://img.youtube.com/vi/f8h0zNa2UPs/0.jpg)](http://www.youtube.com/watch?v=f8h0zNa2UPs "å¤§é˜ªä¸‡åšã§ä¸­å›½ã‚‚è¸ã¿å€’ã—æœªæ‰•ã„ï¼éé…·åŠ´åƒã®ä¸Šã«è²»ç”¨ã‚’æœªæ‰•ã„ï¼å…ƒæ¯æ—¥æ–°èè¨˜è€…ãƒ»å¹¸ç”°æ³‰ã€‚å®‰å†¨æ­©æ±äº¬å¤§å­¦åèª‰æ•™æˆã€‚")

Då…ˆç”Ÿï¼š â€œã†ã£ã¸ãˆã€ã“ã‚“ãªã‚“ã§**å‘½ãŒè¼ã**ã®ï¼ï¼Ÿâ€

QEU:FOUNDER ï¼š â€œã‚‚ã†æœ€æ‚ªã§ã™ã€‚ä»£ã‚ã‚Šã®ãƒ†ãƒ¼ãƒã¨ã—ã¦ã€ä¹…ã€…ã«ã‚³ãƒ¬ï¼ˆâ†“ï¼‰ã‚’ã‚„ã‚Šã¾ã—ã‚‡ã†ã€‚â€

![imageTRIZ0-6-2](/2025-06-16-QEUR23_TRIZ5/imageTRIZ0-6-2.jpg) 

Då…ˆç”Ÿï¼š â€œãŠãŠãƒ»ãƒ»ãƒ»ã€‚ä¹…ã€…ã®å¥åº·çš„ãªãƒ†ãƒ¼ãƒã§ã™ã­ã€‚â€

QEU:FOUNDER ï¼š â€œã¾ãšã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚â€

# --- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…¥åŠ› ---
user_prompt = """ç§ãŸã¡ã®å¸‚ï¼ˆäººå£ç´„50ä¸‡äººã€å¤ªå¹³æ´‹æ²¿ã„ï¼‰ã§ã¯ã€ç«åŠ›ã‚„åŸå­åŠ›ç™ºé›»ã¸ã®ä¾å­˜ã‚’æ¸›ã‚‰ã™ãŸã‚ã€åœ°åŸŸå˜ä½ï¼ˆç´„3000æˆ¸ï¼‰ã§ã®è‡ªç„¶ã‚¨ãƒãƒ«ã‚®ãƒ¼æ´»ç”¨ã‚’è¨ˆç”»ã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€å°å‹é¢¨åŠ›ç™ºé›»ã®å¤§é‡å°å…¥ãŒå€™è£œã§ã™ãŒã€ä»¥ä¸‹ã®èª²é¡ŒãŒã‚ã‚Šã¾ã™ï¼š
- **é¢¨åŠ›ç™ºé›»ã®å¼·ã¿**: æµ·å²¸ä»˜è¿‘ã§å¼·ã„é¢¨ãŒæ™‚æŠ˜ç™ºç”Ÿã™ã‚‹ï¼ˆãŸã ã—é¢¨åŠ›ã¯ä¸å®‰å®šï¼‰ã€‚
- **ä½æ°‘ã®æ‡¸å¿µ**: ã‚³ã‚¹ãƒˆé«˜ã€ç’°å¢ƒç ´å£Šï¼ˆé¨’éŸ³ãƒ»ç”Ÿæ…‹ç³»å½±éŸ¿ï¼‰ã€å¸‚è¡—åœ°è¨­ç½®ã®é›£ã—ã•ã€‚
- **æŠ€è¡“çš„åˆ¶ç´„**: ä¸»æµã®æ°´å¹³è»¸æ–¹å¼ï¼ˆå¤§å‹ãƒ—ãƒ­ãƒšãƒ©ï¼‰ã¯é¨’éŸ³ãŒå¤§ããé¢¨ã‚’ä¹±ã™ãŸã‚å¸‚è¡—åœ°ä¸å‘ãã€‚

ã“ã®å•é¡Œã®é–¢é€£æƒ…å ±ã‚’æµ·å¤–äº‹ä¾‹ã‚’å«ã‚ã¦åé›†ã€åˆ†æã—ã€é©åˆ‡ãªè§£æ±ºç­–ã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚æœ€ä½é™ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’å«ã‚€ã“ã¨ï¼š
- è¨­ç½®ã‚³ã‚¹ãƒˆã®ä½æ¸›ï¼ˆä¾‹ï¼šåˆæœŸæŠ•è³‡ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è²»å‰Šæ¸›ãªã©ï¼‰
- é¢¨åŠ›ä¸å®‰å®šã¸ã®å¯¾å¿œï¼ˆä¾‹ï¼šè“„é›»ãƒ»ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰åŒ–ã€ã‚¸ãƒ£ã‚¤ãƒ­å‹å‚ç›´è»¸é¢¨è»Šã€åˆ†æ•£å‹ã‚¹ãƒãƒ¼ãƒˆã‚°ãƒªãƒƒãƒ‰ãªã©ï¼‰
- é¨’éŸ³ä½æ¸›ã¨ç”Ÿæ…‹ç³»ã¸ã®é…æ…®ï¼ˆä¾‹ï¼šé³¥é¡ã¸ã®å½±éŸ¿æœ€å°åŒ–ãªã©ï¼‰
- å¸‚è¡—åœ°ã«è¨­ç½®ã—ãŸã¨ãã®ç’°å¢ƒé©å¿œæ€§ï¼ˆä¾‹ï¼šå°å‹é¢¨è»Šãªã©ã®ä»£æ›¿æ–¹å¼æ¤œè¨ãªã©ï¼‰"""

tavily_prompt = "ã‚ã‚‹ä¸­è¦æ¨¡ï¼ˆäººå£ç´„50ä¸‡äººã€å¤ªå¹³æ´‹æ²¿ã„ï¼‰ã®éƒ½å¸‚ãŒã€é¢¨åŠ›ç™ºé›»ã®å°å…¥ã‚’æ¤œè¨ã—ã¦ã„ã¾ã™ã€‚ä½æ°‘ã¯ã€æ¦‚ã­ãã®è¨ˆç”»ã«è³›æˆãªã®ã§ã™ãŒã€ã‚³ã‚¹ãƒˆã¨ç’°å¢ƒã€ç”Ÿæ…‹ç³»ã¸ã®å½±éŸ¿ã«å¯¾ã—ã¦æ‡¸å¿µã‚’ã—ã¦ã„ã¾ã™ã€‚æµ·å¤–ã®å‹•å‘ã‚’å«ã‚ã¦é–¢é€£ã—ãŸæƒ…å ±ã‚’åé›†ã—ãŸã„ã€‚"

Då…ˆç”Ÿï¼š â€œã‚ã‚Œï¼Ÿãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒ2ç¨®é¡ã‚ã‚Šã¾ã™ã­ã€‚â€

QEU:FOUNDERï¼š â€œWebæ¤œç´¢APIã‚µãƒ¼ãƒ“ã‚¹ã®Tavilyã¯ã€AIçš„ãªä½¿ã„æ–¹ã‚‚ã§ãã‚‹ãŒã€åŸºæœ¬çš„ã«ã¯Webæ¤œç´¢ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã§ã™ã‹ã‚‰ã€Tavilyç”¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯æ¤œç´¢ç”¨ã«æœ€å°é™ã®è¤‡é›‘ã•ã«ã—ãŸã‚“ã§ã™ã€‚ãã‚Œã§ã¯ã€ã„ããªã‚Šã§ã™ãŒã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ™’ã—ã‚’å§‹ã‚ã¾ã™ã€‚â€

```python
# ---
import os
import re
from langgraph.graph import END, StateGraph
from typing import Dict, List, TypedDict
import pandas as pd
from openai import OpenAI
from langchain_tavily import TavilySearch
import json
from difflib import SequenceMatcher
import logging
import time
from bs4 import BeautifulSoup  # HTMLè§£æç”¨
import html  # HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—è§£é™¤ç”¨

# ãƒ­ã‚®ãƒ³ã‚°è¨­å®š
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')

# --- Tavilyãƒ„ãƒ¼ãƒ«è¨­å®š ---
internet_search = TavilySearch(
    api_key=os.environ['TAVILY_API_KEY'],
    max_results=5,
    include_raw_content=True,  # ç”Ÿã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å–å¾—
    search_depth="advanced"    # è©³ç´°æ¤œç´¢ã‚’æœ‰åŠ¹åŒ–
)

# --- OpenAIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š ---
client_chat = OpenAI(
    api_key=os.getenv("DASHSCOPE_API_KEY"),
    base_url="https://dashscope-intl.aliyuncs.com/compatible-mode/v1",
)
client_reasoner = OpenAI(
    api_key=os.getenv("DEEPSEEK_API_KEY"),
    base_url="https://api.deepseek.com",
)

# --- HTMLã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º ---
def extract_text_from_html(html_content: str) -> str:
    """HTMLã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æŠ½å‡º"""
    try:
        # HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—è§£é™¤
        decoded_content = html.unescape(html_content)
        soup = BeautifulSoup(decoded_content, 'html.parser')
        
        # ä¸è¦ãªè¦ç´ ã‚’é™¤å»
        for element in soup(['script', 'style', 'header', 'footer', 'nav', 'aside', 'form']):
            element.decompose()
        
        # ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ã—ã¦æ•´å½¢
        text = soup.get_text()
        text = re.sub(r'\s+', ' ', text)  # é€£ç¶šã™ã‚‹ç©ºç™½ã‚’å‰Šé™¤
        text = re.sub(r'\[\d+\]', '', text)  # [1]ã®ã‚ˆã†ãªå¼•ç”¨ãƒãƒ¼ã‚¯ã‚’å‰Šé™¤
        return text.strip()
    except Exception as e:
        logging.error(f"HTMLè§£æã‚¨ãƒ©ãƒ¼: {str(e)}")
        return html_content  # å¤±æ•—æ™‚ã¯å…ƒã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¿”ã™

# --- é‡è¤‡é™¤å»é–¢æ•°ï¼ˆURLå¯¾å¿œç‰ˆï¼‰---
def remove_duplicates(items: List[dict], similarity_threshold=0.3) -> List[dict]:
    """
    ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹ã¨URLã‚’çµ„ã¿åˆã‚ã›ã¦é‡è¤‡ã‚’é™¤å»
    å…¥åŠ›: [{"text": "å†…å®¹", "url": "URL"}, ...]
    å‡ºåŠ›: é‡è¤‡é™¤å»å¾Œã®ãƒªã‚¹ãƒˆ
    """
    unique_items = []
    for item in items:
        is_duplicate = False
        text = item["text"]
        url = item["url"]
        
        # åŒã˜URLã®å ´åˆã¯å®Œå…¨é‡è¤‡ã¨ã¿ãªã™
        for unique in unique_items:
            if url == unique["url"]:
                is_duplicate = True
                break
                
        # ç•°ãªã‚‹URLã§ã‚‚å†…å®¹ãŒéå¸¸ã«ä¼¼ã¦ã„ã‚‹å ´åˆ
        if not is_duplicate:
            for unique in unique_items:
                ratio = SequenceMatcher(None, text, unique["text"]).ratio()
                if ratio > similarity_threshold:
                    is_duplicate = True
                    break
                    
        if not is_duplicate:
            unique_items.append(item)
            
    return unique_items

# --- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹è¦ç´„é–¢æ•°---
def summarize_background(text: str, max_chars=2000) -> str:
    """ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«åŸºã¥ã„ã¦èƒŒæ™¯æƒ…å ±ã‚’è¦ç´„ã—æ–‡å­—æ•°ã‚’æ‹¡å……"""
    keywords = ["é¢¨åŠ›", "ã‚³ã‚¹ãƒˆ", "é¨’éŸ³", "ç”Ÿæ…‹ç³»", "å¸‚è¡—åœ°", "è¨­ç½®", "æŠ€è¡“", "ç™ºé›»", "å†ç”Ÿå¯èƒ½", "ã‚¨ãƒãƒ«ã‚®ãƒ¼",
                "è‡ªæ²»ä½“", "é™éŸ³", "é¢¨è»Š", "æ¬§ç±³", "ä¸­å›½", "æ±å—ã‚¢ã‚¸ã‚¢", "è“„é›»", "ã‚¹ãƒãƒ¼ãƒˆ", "å°å…¥", "åŠ¹ç‡",
                "ãƒ•ãƒ©ãƒ³ã‚¹", "ã‚¢ãƒ¡ãƒªã‚«", "ã‚¤ã‚®ãƒªã‚¹", "ãƒ‰ã‚¤ãƒ„", "ã‚¹ã‚¦ã‚§ãƒ¼ãƒ‡ãƒ³", "æ—¥æœ¬", "å°æ¹¾", "éŸ“å›½", "åˆ¶å¾¡"]
    
    # æ–‡ç« ã‚’æ–‡å˜ä½ã§åˆ†å‰²
    sentences = re.split(r'(?<=[ã€‚ï¼ï¼Ÿ\n])', text)
    
    # ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã‚€æ–‡ã‚’æŠ½å‡º
    relevant = [s for s in sentences if any(kw in s for kw in keywords)]
    
    # é–¢é€£æ–‡ãŒå°‘ãªã„å ´åˆã¯è¿½åŠ å‡¦ç†
    if len(relevant) < 10 or len(''.join(relevant)) < 500:
        # æœ€é•·ã®æ–‡ã‚’è¿½åŠ 
        longest = sorted(sentences, key=len, reverse=True)[:10]
        relevant.extend(longest)
    
    summarized = ''.join(relevant)
    
    # æ–‡å­—æ•°ã‚’èª¿æ•´ï¼ˆä¸è¶³ã—ã¦ã„ã‚‹å ´åˆã¯é–¢é€£æƒ…å ±ã‚’è¿½åŠ ï¼‰
    if len(summarized) < max_chars:
        # è¿½åŠ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ
        prompt = f"""
        ä»¥ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆã«é–¢é€£ã™ã‚‹æŠ€è¡“çš„è©³ç´°ã‚’{max_chars - len(summarized)}æ–‡å­—ä»¥å†…ã§è¿½åŠ ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
        å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®è¦ç´ ã‚’å«ã‚ã‚‹ã“ã¨ï¼š
        - é¢¨åŠ›ç™ºé›»ã®æœ€æ–°æŠ€è¡“å‹•å‘
        - æµ·å¤–äº‹ä¾‹ï¼ˆæ¬§ç±³ãƒ»ã‚¢ã‚¸ã‚¢ï¼‰
        - ã‚³ã‚¹ãƒˆå‰Šæ¸›æ‰‹æ³•
        - ç’°å¢ƒå½±éŸ¿å¯¾ç­–
        
        å…ƒãƒ†ã‚­ã‚¹ãƒˆ:
        {summarized[:3000]}
        """
        try:
            response = client_reasoner.chat.completions.create(
                model="deepseek-reasoner",
                messages=[{"role": "user", "content": prompt}],
                temperature=0.1,
                max_tokens=1000
            )
            additional = response.choices[0].message.content
            summarized += "\n" + additional
        except Exception as e:
            logging.error(f"è¿½åŠ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {str(e)}")
            # å¤±æ•—æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
            summarized += ("WARNING - é–¢é€£ã™ã‚‹æŠ€è¡“çš„è©³ç´°: é¢¨åŠ›ç™ºé›»æŠ€è¡“ã¯è¿‘å¹´æ€¥é€Ÿã«é€²æ­©ã—ã¦ãŠã‚Šã€ç‰¹ã«å°å‹å‚ç›´è»¸é¢¨è»Šã®åŠ¹ç‡æ”¹å–„ã¨é¨’éŸ³ä½æ¸›æŠ€è¡“ãŒæ³¨ç›®ã•ã‚Œã¦ã„ã‚‹ã€‚"
                          "æ¬§å·ã§ã¯éƒ½å¸‚éƒ¨ã¸ã®è¨­ç½®å®Ÿç¸¾ãŒå¢—åŠ ã—ã¦ãŠã‚Šã€ãƒ‰ã‚¤ãƒ„ãƒ»ãƒ•ãƒ©ã‚¤ãƒ–ãƒ«ã‚¯å¸‚ã§ã¯å»ºç¯‰ç‰©çµ±åˆå‹ã‚·ã‚¹ãƒ†ãƒ ãŒè©¦é¨“å°å…¥ã•ã‚Œã€"
                          "å¹´é–“ç™ºé›»é‡18MWhã‚’è¨˜éŒ²ã€‚æ—¥æœ¬ã§ã¯é•·å´çœŒæ²–ã§æµ®ä½“å¼æ´‹ä¸Šé¢¨åŠ›ã®å®Ÿè¨¼å®Ÿé¨“ãŒé€²è¡Œä¸­ã€‚")
    
    return summarized[:max_chars]

# --- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°é–¢æ•°---
def filter_inappropriate_content(text: str) -> str:
    """ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å«ã‚€æ–‡ã‚’å®Œå…¨ã«å‰Šé™¤ã™ã‚‹"""
    inappropriate_words = [
        "æš´åŠ›", "æ†æ‚ª", "å·®åˆ¥", "ãƒãƒ«ãƒ", "ã‚¢ãƒ€ãƒ«ãƒˆ", "ç’°å¢ƒç ´å£Š", "å…¬å®³", "åŒ–å­¦", 
        "æœ‰å®³ç‰©è³ª", "çµ¶æ»…å±æƒ§ç¨®", "ç’°å¢ƒãƒ›ãƒ«ãƒ¢ãƒ³", "ç”Ÿæ…‹ç³»ç ´å£Š", "æ”¾å°„èƒ½", "æ´¥æ³¢", "æˆ¦äº‰", "è»äº‹", "ç´›äº‰",
        "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰", "KEYWORD", "SITEMAP", "http", 
        "email", "ç›®æ¬¡", "åºƒå‘Š", "ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸", "ã‚µã‚¤ãƒˆãƒãƒƒãƒ—", "ãƒ‹ãƒ¥ãƒ¼ã‚¹", "å‚è€ƒæ–‡çŒ®", "é–¢é€£è¨˜äº‹", "ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°"
    ]
    
    # æ–‡ã«åˆ†å‰²
    sentences = re.split(r'(?<=[ã€‚ï¼ï¼Ÿ\n])', text)
    
    # ä¸é©åˆ‡ãªå˜èªã‚’å«ã¾ãªã„æ–‡ã®ã¿ã‚’ä¿æŒ
    filtered_sentences = []
    for sentence in sentences:
        # ä¸é©åˆ‡ãªå˜èªãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        if not any(word in sentence for word in inappropriate_words):
            filtered_sentences.append(sentence)
    
    return ''.join(filtered_sentences)

```

Då…ˆç”Ÿï¼š â€œã„ããªã‚Šã€è¤‡é›‘ãªé–¢æ•°ãŒç¶šãã¾ã™ã€‚ã“ã‚Œã‚‰ã®ï¼’ã¤ã®é–¢æ•°ã«ã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€ä½•ã‚’ã™ã‚‹ãŸã‚ã®é–¢æ•°ã§ã™ã‹ï¼Ÿâ€

QEU:FOUNDER ï¼š â€œã¾ã‚ã€ã“ã†ã„ã†ã‚„ã‚Šæ–¹ãŒã„ã„ã‹ã©ã†ã‹ã¯ã‚ã‹ã‚‰ã‚“ã®ã ãŒãƒ»ãƒ»ãƒ»ã€‚Tavilyã¯ã€Webã‹ã‚‰ä¸€éƒ¨ã®æƒ…å ±ã ã‘ã‚’åˆ‡ã‚Šå‡ºã—ã¦ãã‚Œã¾ã™ã€‚ãã‚Œã§ã¯æƒ…å ±ãŒè¶³ã‚Šãªã™ãã‚‹ã€‚ãã“ã§ã€TavilyãŒæ¤œå‡ºã—ãŸWebå…¨æ–‡ã‚’å–ã‚Šè¾¼ã‚“ã§ã„ã¾ã™ã€‚ã—ã‹ã—ã€ãã‚Œã§ã¯å–ã‚Šè¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ãŒå¤§ãã™ãã¾ã™ã€‚ãã“ã§ã€ãã®Webå…¨æ–‡ã‚’æ–‡å˜ä½ã«åˆ‡ã‚Šåˆ»ã¿ã€ã•ã‚‰ã«ãƒã‚¸ãƒ†ã‚£ãƒ–ã¨ãƒã‚¬ãƒ†ã‚£ãƒ–ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ç™»éŒ²ã—ã¾ã™ã€‚å…¨ã¦ã®æ–‡ã‚’æ¤œæŸ»ã—ã€æ–‡ä¸­ã«ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒã‚ã‚Œã°ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç™»éŒ²ã—ã€ã•ã‚‰ã«ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒã‚ã‚Œã°ã€ãã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å‰Šé™¤ã—ã¾ã™ã€‚â€

Då…ˆç”Ÿï¼š â€œãªã‚‹ã»ã©ã€‚ãã†ã™ã‚Œã°ã€å–ã‚Šè¾¼ã‚“ã å¾Œã®Webãƒ‡ãƒ¼ã‚¿ãŒå°‘ãªããªã‚Šã¾ã™ã€‚ãªã‹ãªã‹ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚‚å¤§å¤‰ã§ã™ã­ãˆãƒ»ãƒ»ãƒ»ã€‚â€

QEU:FOUNDER ï¼š â€œãã‚Œã§ã¯ã€æ¬¡ã«ã„ãã¾ã—ã‚‡ã†ã€‚â€

```python
# --- çŠ¶æ…‹å®šç¾© ---
class AnalysisState(TypedDict):
    input: str
    tavily_input: str
    problems: List[str]
    goals: List[str]
    contradictions: List[Dict[str, str]]
    background: Dict[str, List[dict]]  # å¤‰æ›´: å„ã‚¢ã‚¤ãƒ†ãƒ ã¯{"text": "å†…å®¹", "url": "URL"}å½¢å¼
    consolidated_background: Dict[str, str]

# TRIZ 39çŸ›ç›¾ç‰¹å¾´
TRIZ_FEATURES = """
|   NO | Feature                  | Explanation                   |
|-----:|:-------------------------|:------|
|    1 | ç§»å‹•ç‰©ä½“ã®é‡é‡       | é‡åŠ›å ´ã«ãŠã‘ã‚‹ç‰©ä½“ã®è³ªé‡ã€‚ç‰©ä½“ãŒãã®æ”¯æŒéƒ¨ã¾ãŸã¯æ‡¸æ¶éƒ¨ã«åŠã¼ã™åŠ›ã€‚                        |
|    2 | é™æ­¢ç‰©ä½“ã®é‡é‡       | é‡åŠ›å ´ã«ãŠã‘ã‚‹ç‰©ä½“ã®è³ªé‡ã€‚ç‰©ä½“ãŒæ”¯æŒéƒ¨ã€æ‡¸æ¶éƒ¨ã€ã¾ãŸã¯ç‰©ä½“ãŒè¼‰ã£ã¦ã„ã‚‹è¡¨é¢ã«åŠã¼ã™åŠ›ã€‚    |
|    3 | ç§»å‹•ç‰©ä½“ã®é•·ã•       | å¿…ãšã—ã‚‚æœ€é•·ã§ã‚ã‚‹å¿…è¦ã¯ãªãã€ä»»æ„ã® 1 ã¤ã®ç·šå½¢å¯¸æ³•ãŒé•·ã•ã¨ã¿ãªã•ã‚Œã¾ã™ã€‚                 |
|    4 | é™æ­¢ç‰©ä½“ã®é•·ã•       | å¿…ãšã—ã‚‚æœ€é•·ã§ã‚ã‚‹å¿…è¦ã¯ãªãã€ä»»æ„ã® 1 ã¤ã®ç·šå½¢å¯¸æ³•ãŒé•·ã•ã¨ã¿ãªã•ã‚Œã¾ã™ã€‚                 |
|    5 | ç§»å‹•ç‰©ä½“ã®é¢ç©       | ç›´ç·šã§å›²ã¾ã‚ŒãŸå¹³é¢ã®éƒ¨åˆ†ã«ã‚ˆã£ã¦è¨˜è¿°ã•ã‚Œã‚‹å¹¾ä½•å­¦çš„ç‰¹æ€§ã€‚ç‰©ä½“ãŒå ã‚ã‚‹è¡¨é¢ã®éƒ¨åˆ†ã€‚ã¾ãŸã¯ã€ç‰©ä½“ã®å†…éƒ¨ã¾ãŸã¯å¤–éƒ¨ã®è¡¨é¢ç©ã®å¹³æ–¹å¯¸æ³•ã€‚              |
|    6 | é™æ­¢ç‰©ä½“ã®é¢ç©       | ç›´ç·šã§å›²ã¾ã‚ŒãŸå¹³é¢ã®éƒ¨åˆ†ã«ã‚ˆã£ã¦è¨˜è¿°ã•ã‚Œã‚‹å¹¾ä½•å­¦çš„ç‰¹æ€§ã€‚ç‰©ä½“ãŒå ã‚ã‚‹è¡¨é¢ã®éƒ¨åˆ†ã€‚ã¾ãŸã¯ã€ç‰©ä½“ã®å†…éƒ¨ã¾ãŸã¯å¤–éƒ¨ã®è¡¨é¢ç©ã®å¹³æ–¹å¯¸æ³•ã€‚              |
|    7 | ç§»å‹•ç‰©ä½“ã®ä½“ç©       | ç‰©ä½“ãŒå ã‚ã‚‹ç©ºé–“ã®ç«‹æ–¹ä½“ã®å¤§ãã•ã€‚é•·æ–¹å½¢ã®ç‰©ä½“ã®å ´åˆã¯é•·ã•Ã—å¹…Ã—é«˜ã•ã€å††æŸ±ã®å ´åˆã¯é«˜ã•Ã—é¢ç©ãªã©ã€‚                           |
|    8 | é™æ­¢ç‰©ä½“ã®ä½“ç©       | ç‰©ä½“ãŒå ã‚ã‚‹ç©ºé–“ã®ç«‹æ–¹ä½“ã®å¤§ãã•ã€‚é•·æ–¹å½¢ã®ç‰©ä½“ã®å ´åˆã¯é•·ã•Ã—å¹…Ã—é«˜ã•ã€å††æŸ±ã®å ´åˆã¯é«˜ã•Ã—é¢ç©ãªã©ã€‚                           |
|    9 | é€Ÿåº¦         | ç‰©ä½“ã®é€Ÿåº¦ã€æ™‚é–“ã«ãŠã‘ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã¾ãŸã¯å‹•ä½œã®é€Ÿåº¦   |
|   10 | åŠ›           | åŠ›ã¯ã‚·ã‚¹ãƒ†ãƒ é–“ã®ç›¸äº’ä½œç”¨ã‚’æ¸¬ã‚‹ã‚‚ã®ã§ã™ã€‚ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³åŠ›å­¦ã§ã¯ã€åŠ›ï¼è³ªé‡Ã—åŠ é€Ÿåº¦ã§ã™ã€‚TRIZã§ã¯ã€åŠ›ã¨ã¯ç‰©ä½“ã®çŠ¶æ…‹ã‚’å¤‰åŒ–ã•ã›ã‚‹ã“ã¨ã‚’æ„å›³ã—ãŸã‚ã‚‰ã‚†ã‚‹ç›¸äº’ä½œç”¨ã‚’æŒ‡ã—ã¾ã™ã€‚     |
|   11 | å¿œåŠ›ã¾ãŸã¯åœ§åŠ›       | å˜ä½é¢ç©ã‚ãŸã‚Šã®åŠ›ã€‚ã¾ãŸã€å¼µåŠ›ã€‚                   |
|   12 | å½¢çŠ¶         | ã‚·ã‚¹ãƒ†ãƒ ã®å¤–éƒ¨ã®è¼ªéƒ­ã€å¤–è¦³ã€‚   |
|   13 | ç‰©ä½“ã®å®‰å®šæ€§ | ã‚·ã‚¹ãƒ†ãƒ ã®å…¨ä½“æ€§ã¾ãŸã¯å®Œå…¨æ€§ã€ã™ãªã‚ã¡ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹æˆã™ã‚‹è¦ç´ é–“ã®é–¢ä¿‚ã€‚æ‘©è€—ã€åŒ–å­¦åˆ†è§£ã€åˆ†è§£ã¯ã™ã¹ã¦å®‰å®šæ€§ã®ä½ä¸‹ã‚’ã‚‚ãŸã‚‰ã™ã€‚ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã®å¢—åŠ ã¯å®‰å®šæ€§ã®ä½ä¸‹ã‚’ã‚‚ãŸã‚‰ã™ã€‚|
|   14 | å¼·åº¦         | ç‰©ä½“ãŒåŠ›ã«å¿œã˜ã¦å¤‰åŒ–ã«æŠµæŠ—ã§ãã‚‹ç¨‹åº¦ã€‚ç ´å£Šã«å¯¾ã™ã‚‹æŠµæŠ—ã€‚   |
|   15 | ç§»å‹•ç‰©ä½“ã®è€ä¹…æ€§     | ç‰©ä½“ãŒå‹•ä½œã‚’å®Ÿè¡Œã§ãã‚‹æ™‚é–“ã€‚è€ç”¨å¹´æ•°ã€‚å¹³å‡æ•…éšœé–“éš”ã¯å‹•ä½œã®æŒç¶šæ™‚é–“ã‚’è¡¨ã™æŒ‡æ¨™ã§ã™ã€‚ã¾ãŸã€è€ä¹…æ€§ã‚‚è¡¨ã—ã¾ã™ã€‚        |
|   16 | é™æ­¢ç‰©ä½“ã®è€ä¹…æ€§     | ç‰©ä½“ãŒå‹•ä½œã‚’å®Ÿè¡Œã§ãã‚‹æ™‚é–“ã€‚è€ç”¨å¹´æ•°ã€‚å¹³å‡æ•…éšœé–“éš”ã¯å‹•ä½œã®æŒç¶šæ™‚é–“ã‚’è¡¨ã™æŒ‡æ¨™ã§ã™ã€‚ã¾ãŸã€è€ä¹…æ€§ã‚‚è¡¨ã—ã¾ã™ã€‚        |
|   17 | æ¸©åº¦         | ç‰©ä½“ã¾ãŸã¯ã‚·ã‚¹ãƒ†ãƒ ã®ç†±çš„çŠ¶æ…‹ã€‚ç†±å®¹é‡ãªã©ã€æ¸©åº¦å¤‰åŒ–ç‡ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ä»–ã®ç†±ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚ç·©ãå«ã¿ã¾ã™ã€‚                |
|   18 | æ˜ã‚‹ã•       | å˜ä½é¢ç©ã‚ãŸã‚Šã®å…‰æŸã€ã¾ãŸæ˜ã‚‹ã•ã€å…‰ã®è³ªãªã©ã€ã‚·ã‚¹ãƒ†ãƒ ã®ãã®ä»–ã®ç…§æ˜ç‰¹æ€§ã€‚        |
|   19 | ç§»å‹•ç‰©ä½“ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²» | ç‰©ä½“ãŒä»•äº‹ã‚’ã™ã‚‹èƒ½åŠ›ã®å°ºåº¦ã€‚å¤å…¸åŠ›å­¦ã§ã¯ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯åŠ›Ã—è·é›¢ã®ç©ã§ã™ã€‚ã“ã‚Œã«ã¯ã€ä¸Šä½ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ä¾›çµ¦ã•ã‚Œã‚‹ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆé›»æ°—ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚„ç†±ãªã©ï¼‰ã®åˆ©ç”¨ã‚‚å«ã¾ã‚Œã¾ã™ã€‚ç‰¹å®šã®ä»•äº‹ã‚’ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ã€‚  |
|   20 | é™æ­¢ç‰©ä½“ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²» | ç‰©ä½“ãŒä»•äº‹ã‚’ã™ã‚‹èƒ½åŠ›ã®å°ºåº¦ã€‚å¤å…¸åŠ›å­¦ã§ã¯ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯åŠ›Ã—è·é›¢ã®ç©ã§ã™ã€‚ã“ã‚Œã«ã¯ã€ä¸Šä½ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ä¾›çµ¦ã•ã‚Œã‚‹ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆé›»æ°—ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚„ç†±ãªã©ï¼‰ã®åˆ©ç”¨ã‚‚å«ã¾ã‚Œã¾ã™ã€‚ç‰¹å®šã®ä»•äº‹ã‚’ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ã€‚  |
|   21 | ã‚¨ãƒãƒ«ã‚®ãƒ¼ä½¿ç”¨é‡     | ä»•äº‹ãŒå®Ÿè¡Œã•ã‚Œã‚‹æ™‚é–“é€Ÿåº¦ã€‚ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ä½¿ç”¨é€Ÿåº¦ã€‚   |
|   22 | ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ­ã‚¹       | ä»•äº‹ã«å¯„ä¸ã—ãªã„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ä½¿ç”¨ã€‚19é …å‚ç…§ã€‚ã‚¨ãƒãƒ«ã‚®ãƒ¼æå¤±ã®å‰Šæ¸›ã«ã¯ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼åˆ©ç”¨ã®æ”¹å–„ã¨ã¯ç•°ãªã‚‹æŠ€è¡“ãŒå¿…è¦ã¨ãªã‚‹å ´åˆãŒã‚ã‚Šã€ã“ã‚ŒãŒåˆ¥ã®ã‚«ãƒ†ã‚´ãƒªã¨ãªã£ã¦ã„ã‚‹ç†ç”±ã§ã™ã€‚      |
|   23 | ç‰©è³ªæå¤±     | ã‚·ã‚¹ãƒ†ãƒ ã®ææ–™ã€ç‰©è³ªã€éƒ¨å“ã€ã¾ãŸã¯ã‚µãƒ–ã‚·ã‚¹ãƒ†ãƒ ã®ä¸€éƒ¨ãŒéƒ¨åˆ†çš„ã¾ãŸã¯å®Œå…¨ã«ã€æ°¸ä¹…çš„ã¾ãŸã¯ä¸€æ™‚çš„ã«å¤±ã‚ã‚Œã‚‹ã“ã¨ã€‚      |
|   24 | æƒ…å ±æå¤±     | ã‚·ã‚¹ãƒ†ãƒ å†…ã¾ãŸã¯ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹ã€éƒ¨åˆ†çš„ã¾ãŸã¯å®Œå…¨ãªã€æ°¸ç¶šçš„ã¾ãŸã¯ä¸€æ™‚çš„ãªãƒ‡ãƒ¼ã‚¿æå¤±ã€ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æå¤±ã€‚å¤šãã®å ´åˆã€é¦™ã‚Šã‚„é£Ÿæ„Ÿãªã©ã®æ„Ÿè¦šãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¾ã™ã€‚|
|   25 | æ™‚é–“æå¤±     | æ™‚é–“ã¨ã¯ã€ã‚ã‚‹æ´»å‹•ã®ç¶™ç¶šæœŸé–“ã§ã™ã€‚æ™‚é–“ãƒ­ã‚¹ã‚’æ”¹å–„ã™ã‚‹ã¨ã„ã†ã“ã¨ã¯ã€ãã®æ´»å‹•ã«ã‹ã‹ã‚‹æ™‚é–“ã‚’çŸ­ç¸®ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ã€Œã‚µã‚¤ã‚¯ãƒ«ã‚¿ã‚¤ãƒ çŸ­ç¸®ã€ã¯ã‚ˆãä½¿ã‚ã‚Œã‚‹ç”¨èªã§ã™ã€‚      |
|   26 | ç‰©è³ªã®é‡     | å®Œå…¨ã«ã¾ãŸã¯éƒ¨åˆ†çš„ã«ã€æ°¸ä¹…çš„ã«ã¾ãŸã¯ä¸€æ™‚çš„ã«å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®ææ–™ã€ç‰©è³ªã€éƒ¨å“ã€ã¾ãŸã¯ã‚µãƒ–ã‚·ã‚¹ãƒ†ãƒ ã®æ•°ã¾ãŸã¯é‡ã€‚|
|   27 | ä¿¡é ¼æ€§       | äºˆæ¸¬å¯èƒ½ãªæ–¹æ³•ã¨æ¡ä»¶ã§æ„å›³ã•ã‚ŒãŸæ©Ÿèƒ½ã‚’å®Ÿè¡Œã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®èƒ½åŠ›ã€‚ |
|   28 | æ¸¬å®šç²¾åº¦     | æ¸¬å®šå€¤ã¨ã‚·ã‚¹ãƒ†ãƒ ã®ç‰¹æ€§ã®å®Ÿéš›ã®å€¤ã¨ã®è¿‘ã•ã€‚æ¸¬å®šèª¤å·®ã‚’æ¸›ã‚‰ã™ã“ã¨ã§ã€æ¸¬å®šç²¾åº¦ãŒå‘ä¸Šã—ã¾ã™ã€‚  |
|   29 | è£½é€ ç²¾åº¦     | ã‚·ã‚¹ãƒ†ãƒ ã¾ãŸã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å®Ÿéš›ã®ç‰¹æ€§ãŒæŒ‡å®šã•ã‚ŒãŸç‰¹æ€§ã¾ãŸã¯è¦æ±‚ã•ã‚ŒãŸç‰¹æ€§ã¨ä¸€è‡´ã™ã‚‹ç¨‹åº¦ã€‚|
|   30 | ç‰©ä½“ã¸ã®æœ‰å®³è¦å›      | å¤–éƒ¨ã‹ã‚‰ç™ºç”Ÿã™ã‚‹ï¼ˆæœ‰å®³ãªï¼‰å½±éŸ¿ã«å¯¾ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®æ„Ÿå—æ€§ã€‚   |
|   31 | ç‰©ä½“ãŒç™ºç”Ÿã™ã‚‹æœ‰å®³è¦å›    | æœ‰å®³ãªå½±éŸ¿ã¨ã¯ã€ç‰©ä½“ã¾ãŸã¯ã‚·ã‚¹ãƒ†ãƒ ã®æ©Ÿèƒ½ã®åŠ¹ç‡ã¾ãŸã¯å“è³ªã‚’ä½ä¸‹ã•ã›ã‚‹å½±éŸ¿ã§ã™ã€‚ã“ã‚Œã‚‰ã®æœ‰å®³ãªå½±éŸ¿ã¯ã€ç‰©ä½“ã¾ãŸã¯ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œã®ä¸€éƒ¨ã¨ã—ã¦ã€ç‰©ä½“ã¾ãŸã¯ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚Œã¾ã™ã€‚|
|   32 | è£½é€ ã®å®¹æ˜“æ€§ | ç‰©ä½“/ã‚·ã‚¹ãƒ†ãƒ ã‚’è£½é€ ã¾ãŸã¯åŠ å·¥ã™ã‚‹éš›ã®å®¹æ˜“ã•ã€å¿«é©ã•ã€ã¾ãŸã¯å®¹æ˜“ã•ã®åº¦åˆã„ã€‚       |
|   33 | æ“ä½œã®å®¹æ˜“æ€§ | ã‚·ãƒ³ãƒ—ãƒ«ã•: å¤šãã®äººå“¡ã€å¤šæ•°ã®æ“ä½œæ‰‹é †ã€ç‰¹åˆ¥ãªãƒ„ãƒ¼ãƒ«ãªã©ãŒå¿…è¦ãªå ´åˆã€ãã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ç°¡å˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã€Œé›£ã—ã„ã€ãƒ—ãƒ­ã‚»ã‚¹ã¯æ­©ç•™ã¾ã‚ŠãŒä½ãã€ã€Œç°¡å˜ãªã€ãƒ—ãƒ­ã‚»ã‚¹ã¯æ­©ç•™ã¾ã‚ŠãŒé«˜ãã€æ­£ã—ãå®Ÿè¡Œã™ã‚‹ã®ãŒç°¡å˜ã§ã™ã€‚ |
|   34 | ä¿å®ˆã®å®¹æ˜“æ€§ | åˆ©ä¾¿æ€§ã€å¿«é©ã•ã€ã‚·ãƒ³ãƒ—ãƒ«ã•ã€ã‚·ã‚¹ãƒ†ãƒ ã®éšœå®³ã€æ•…éšœã€æ¬ é™¥ã‚’ä¿®å¾©ã™ã‚‹æ™‚é–“ãªã©ã®å“è³ªç‰¹æ€§ã€‚      |
|   35 | é©å¿œæ€§ã¾ãŸã¯å¤šæ§˜æ€§   | ã‚·ã‚¹ãƒ†ãƒ ï¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå¤–éƒ¨ã®å¤‰åŒ–ã«ç©æ¥µçš„ã«åå¿œã™ã‚‹ç¨‹åº¦ã€‚ã¾ãŸã€æ§˜ã€…ãªçŠ¶æ³ä¸‹ã§è¤‡æ•°ã®æ–¹æ³•ã§ä½¿ç”¨ã§ãã‚‹ã‚·ã‚¹ãƒ†ãƒ ã€‚    |
|   36 | ã‚·ã‚¹ãƒ†ãƒ ã®è¤‡é›‘ã•     | ã‚·ã‚¹ãƒ†ãƒ å†…ã®è¦ç´ ã®æ•°ã¨å¤šæ§˜æ€§ã€ãŠã‚ˆã³è¦ç´ é–“ã®ç›¸äº’é–¢ä¿‚ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚·ã‚¹ãƒ†ãƒ ã®è¤‡é›‘ã•ã‚’å¢—å¤§ã•ã›ã‚‹è¦ç´ ã¨ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚ã‚·ã‚¹ãƒ†ãƒ ã®ç¿’å¾—ã®é›£ã—ã•ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã®è¤‡é›‘ã•ã®å°ºåº¦ã¨ãªã‚‹ã€‚  |
|   37 | æ¤œå‡ºã¨æ¸¬å®šã®å›°é›£ã•   | è¤‡é›‘ã§ã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚Šã€ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ä½¿ç”¨ã«å¤šãã®æ™‚é–“ã¨åŠ´åŠ›ã‚’å¿…è¦ã¨ã™ã‚‹æ¸¬å®šã‚·ã‚¹ãƒ†ãƒ ã‚„ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã€ã¾ãŸã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®é–¢ä¿‚ãŒè¤‡é›‘ã§ã‚ã£ãŸã‚Šã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒäº’ã„ã«å¹²æ¸‰ã—ãŸã‚Šã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã¯ã™ã¹ã¦ã€ã€Œæ¤œå‡ºã¨æ¸¬å®šã®é›£ã—ã•ã€ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚æº€è¶³ã®ã„ãèª¤å·®ã¾ã§ã®æ¸¬å®šã‚³ã‚¹ãƒˆã®å¢—åŠ ã‚‚ã€æ¸¬å®šã®é›£ã—ã•ãŒå¢—ã—ã¦ã„ã‚‹å…†å€™ã§ã™ã€‚   |
|   38 | è‡ªå‹•åŒ–ãƒ¬ãƒ™ãƒ« | ã‚·ã‚¹ãƒ†ãƒ ã¾ãŸã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒäººé–“ã¨ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãªã—ã«æ©Ÿèƒ½ã‚’å®Ÿè¡Œã™ã‚‹ç¨‹åº¦ã€‚è‡ªå‹•åŒ–ã®æœ€ä½ãƒ¬ãƒ™ãƒ«ã¯ã€æ‰‹å‹•æ“ä½œãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨ã§ã™ã€‚ä¸­ãƒ¬ãƒ™ãƒ«ã®å ´åˆã€äººé–“ã¯ãƒ„ãƒ¼ãƒ«ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã—ã€ãã®å‹•ä½œã‚’è¦³å¯Ÿã—ã€å¿…è¦ã«å¿œã˜ã¦ä¸­æ–­ã¾ãŸã¯å†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã—ã¾ã™ã€‚æœ€é«˜ãƒ¬ãƒ™ãƒ«ã®å ´åˆã€æ©Ÿæ¢°ã¯å¿…è¦ãªæ“ä½œã‚’æ„ŸçŸ¥ã—ã€è‡ªã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã—ã€è‡ªã‚‰ã®å‹•ä½œã‚’ç›£è¦–ã—ã¾ã™ã€‚ |
|   39 | ç”Ÿç”£æ€§       | ã‚·ã‚¹ãƒ†ãƒ ãŒå˜ä½æ™‚é–“ã‚ãŸã‚Šã«å®Ÿè¡Œã™ã‚‹æ©Ÿèƒ½ã¾ãŸã¯æ“ä½œã®æ•°ã€‚å˜ä½æ©Ÿèƒ½ã¾ãŸã¯æ“ä½œã«ã‹ã‹ã‚‹æ™‚é–“ã€‚å˜ä½æ™‚é–“ã‚ãŸã‚Šã®å‡ºåŠ›ã€ã¾ãŸã¯å˜ä½å‡ºåŠ›ã‚ãŸã‚Šã®ã‚³ã‚¹ãƒˆã€‚    |
"""

# --- èƒŒæ™¯æƒ…å ±ç”Ÿæˆï¼ˆå¼·åŒ–ç‰ˆï¼‰---
def generate_background(state: AnalysisState) -> AnalysisState:
    start_time = time.time()
    print("ğŸ” [ã‚¹ãƒ†ãƒƒãƒ—1/4] èƒŒæ™¯æƒ…å ±ã®ç”Ÿæˆã‚’é–‹å§‹...")
    logging.info("èƒŒæ™¯æƒ…å ±ã®ç”Ÿæˆã‚’é–‹å§‹ã—ã¾ã™")
    user_input = state['tavily_input']

    # æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã§å¼·åŒ–
    categories = {
        "customer": f"{user_input} å¸‚æ°‘ã®æ‡¸å¿µ OR ä½æ°‘æ„è¦‹ OR é¢¨åŠ›ç™ºé›» å¸‚æ°‘",
        "organization": f"{user_input} å°å…¥äº‹ä¾‹ OR æ”¿ç­– OR è‡ªæ²»ä½“ OR æ´‹ä¸Šé¢¨åŠ›",
        "technology": f"{user_input} å‚ç›´è»¸é¢¨è»Š OR é™éŸ³è¨­è¨ˆ OR å°å‹é¢¨åŠ› OR è“„é›»æŠ€è¡“",
        "cost": f"{user_input} ã‚³ã‚¹ãƒˆå‰Šæ¸› OR åˆæœŸæŠ•è³‡ OR ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è²» OR çµŒæ¸ˆæ€§",
        "legal": f"{user_input} ç’°å¢ƒã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆ OR è¦åˆ¶ OR æ³•å¾‹"
    }

    background = {
        "customer": [],
        "organization": [],
        "cost": [],
        "technology": [],
        "legal": []
    }

    for category, query in categories.items():
        logging.info(f"æ¤œç´¢ä¸­: {category} - {query}")
        try:
            print(f"  - {category}ã‚«ãƒ†ã‚´ãƒªã®æ¤œç´¢å®Ÿè¡Œ: {query[:80]}...")
            search_result = internet_search.invoke({"query": query})

            items = []  # {"text": "å†…å®¹", "url": "URL"}å½¢å¼ã®ãƒªã‚¹ãƒˆ
            for res in search_result["results"][:5]:
                # URLã‚’å–å¾—
                url = res.get("url", "URLä¸æ˜")

                # ç”ŸHTMLã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º
                raw_html = res.get("raw_content", "")
                if raw_html:
                    content = extract_text_from_html(raw_html)
                else:
                    content = res.get("content", "")

                # ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¨è¦ç´„
                filtered = filter_inappropriate_content(content)
                summarized = summarize_background(filtered, 2000)  # 2000æ–‡å­—ã¾ã§æ‹¡å……

                items.append({
                    "text": summarized,
                    "url": url
                })

            # URLã¨å†…å®¹ã‚’çµ„ã¿åˆã‚ã›ãŸé‡è¤‡é™¤å»
            unique_items = remove_duplicates(items)

            # æ–‡å­—æ•°ä¸è¶³ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’è£œå®Œ
            final_items = []
            for item in unique_items:
                if len(item["text"]) < 1500:
                    try:
                        prompt = f"ä»¥ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’é¢¨åŠ›ç™ºé›»ã®è¦³ç‚¹ã‹ã‚‰æŠ€è¡“çš„è©³ç´°ã‚’è¿½åŠ ã—ã¦1200æ–‡å­—ä»¥ä¸Š1500æ–‡å­—ä»¥å†…ã«æ‹¡å……ã—ã¦ãã ã•ã„:\n{item['text']}"
                        response = client_reasoner.chat.completions.create(
                            model="deepseek-reasoner",
                            messages=[{"role": "user", "content": prompt}],
                            temperature=0.3,
                            max_tokens=1500
                        )
                        expanded = response.choices[0].message.content
                        item["text"] = expanded[:1000]
                    except:
                        item["text"] += " " + ("è©³ç´°æƒ…å ±: é¢¨åŠ›ç™ºé›»æŠ€è¡“ã¯è¿‘å¹´æ€¥é€Ÿã«é€²æ­©..." * 10)[:1500-len(item["text"])]
                final_items.append(item)

            background[category] = final_items
            avg_length = sum(len(item["text"]) for item in final_items) / len(final_items)
            print(f"    âœ… çµæœ: {len(final_items)}ä»¶ â†’ å¹³å‡æ–‡å­—æ•°: {avg_length:.0f}æ–‡å­—")
            print(f"    â”” ä»£è¡¨URL: {final_items[0]['url']}")

        except Exception as e:
            logging.error(f"{category}ã®æ¤œç´¢ã§ã‚¨ãƒ©ãƒ¼: {str(e)}")
            background[category] = [{"text": f"æ¤œç´¢ã‚¨ãƒ©ãƒ¼: {str(e)}", "url": "N/A"}]
            print(f"    â— ã‚¨ãƒ©ãƒ¼: {str(e)}")

    # çµæœã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
    print("\nğŸ“Š èƒŒæ™¯æƒ…å ±ç”Ÿæˆçµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:")
    for cat, items in background.items():
        print(f"  - {cat}: {len(items)}ä»¶ã®æƒ…å ±")
        if items:
            avg_length = sum(len(item["text"]) for item in items) / len(items)
            print(f"    â”œ å¹³å‡æ–‡å­—æ•°: {avg_length:.0f}æ–‡å­—")
            print(f"    â”œ URLæ•°: {len(set(item['url'] for item in items))}å€‹")
            print(f"    â”” æœ€åˆã®URL: {items[0]['url']}")

    elapsed = time.time() - start_time
    print(f"âœ… [ã‚¹ãƒ†ãƒƒãƒ—1/4] èƒŒæ™¯æƒ…å ±ç”Ÿæˆå®Œäº† ({elapsed:.2f}ç§’)")
    logging.info("èƒŒæ™¯æƒ…å ±ã®ç”ŸæˆãŒå®Œäº†ã—ã¾ã—ãŸ")
    return {**state, "background": background}

# --- èƒŒæ™¯æƒ…å ±ã®æ•´ç†ã¨è¦ç´„ï¼ˆå¼·åŒ–ç‰ˆï¼‰---
def consolidate_background(state: AnalysisState) -> AnalysisState:
    start_time = time.time()
    print("\nğŸ“š [ã‚¹ãƒ†ãƒƒãƒ—2/4] èƒŒæ™¯æƒ…å ±ã®æ•´ç†ã‚’é–‹å§‹...")
    logging.info("èƒŒæ™¯æƒ…å ±ã®æ•´ç†ã‚’é–‹å§‹ã—ã¾ã™")
    background = state['background']

    # èƒŒæ™¯æƒ…å ±ã®çµ±è¨ˆè¡¨ç¤º
    total_items = sum(len(items) for items in background.values())
    total_chars = sum(len(item["text"]) for items in background.values() for item in items)
    unique_urls = len(set(item["url"] for items in background.values() for item in items))
    print(f"  - ç·æƒ…å ±é‡: {total_items}ä»¶, ç·æ–‡å­—æ•°: {total_chars}æ–‡å­—, ãƒ¦ãƒ‹ãƒ¼ã‚¯URLæ•°: {unique_urls}")

    combined_data = ""
    for category, items in background.items():
        category_name = cat_names.get(category, category)
        combined_data += f"ã€{category_name}ã€‘\n"
        for i, item in enumerate(items, 1):
            combined_data += f"{i}. {item['text']}\n"
        combined_data += "\n"

    # é•·ã™ãã‚‹å ´åˆã¯æœ€åˆã®10000æ–‡å­—ã‚’ä½¿ç”¨
    if len(combined_data) > 10000:
        combined_data = combined_data[:10000] + "\n... (ä»¥ä¸‹çœç•¥)"

    prompt = f"""
    ä»¥ä¸‹ã®èƒŒæ™¯æƒ…å ±ã‚’5ã¤ã®ã‚«ãƒ†ã‚´ãƒªã«æ•´ç†ã—ã€å„ã‚«ãƒ†ã‚´ãƒªã‚’1000æ–‡å­—ä»¥ä¸Š1500æ–‡å­—ä»¥å†…ã§è©³ç´°ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚
    ä»¥ä¸‹ã®ç‚¹ã«ç‰¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼š
    1. æŠ€è¡“çš„è©³ç´°ã€æ•°å€¤ãƒ‡ãƒ¼ã‚¿ã€å…·ä½“çš„äº‹ä¾‹ã‚’ã§ãã‚‹ã ã‘ä¿æŒã™ã‚‹
    2. æµ·å¤–äº‹ä¾‹ï¼ˆæ¬§ç±³ãƒ»ã‚¢ã‚¸ã‚¢ï¼‰ã®æƒ…å ±ã‚’å„ªå…ˆçš„ã«å«ã‚ã‚‹
    3. å„ã‚«ãƒ†ã‚´ãƒªã®æœ¬è³ªçš„ãªæƒ…å ±ã‚’æŠ½å‡ºã—ã¤ã¤æ–‡å­—æ•°ã‚’ç¢ºä¿ã™ã‚‹

    ## é‡è¦: JSONå½¢å¼ã§å‡ºåŠ›ã—ã€å„è¦ç´„ã‚’1200æ–‡å­—ä»¥ä¸Š1500æ–‡å­—ä»¥å†…ã«ã™ã‚‹ã“ã¨

    ## èƒŒæ™¯æƒ…å ±:
    {combined_data}

    ## å‡ºåŠ›å½¢å¼ï¼ˆJSONï¼‰:
    {{
        "customer": "è¦ç´„æ–‡ï¼ˆ1200æ–‡å­—ä»¥ä¸Š1500æ–‡å­—ä»¥å†…ï¼‰",
        "organization": "è¦ç´„æ–‡ï¼ˆ1200æ–‡å­—ä»¥ä¸Š1500æ–‡å­—ä»¥å†…ï¼‰",
        "technology": "è¦ç´„æ–‡ï¼ˆ1200æ–‡å­—ä»¥ä¸Š1500æ–‡å­—ä»¥å†…ï¼‰",
        "cost": "è¦ç´„æ–‡ï¼ˆ1200æ–‡å­—ä»¥ä¸Š1500æ–‡å­—ä»¥å†…ï¼‰",
        "legal": "è¦ç´„æ–‡ï¼ˆ1200æ–‡å­—ä»¥ä¸Š1500æ–‡å­—ä»¥å†…ï¼‰"
    }}
    """

    try:
        print("  - è©³ç´°è¦ç´„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ä¸­...")
        response = client_reasoner.chat.completions.create(
            model="deepseek-reasoner",
            messages=[
                {'role': 'system', 'content': 'æŠ€è¡“çš„è©³ç´°ã‚’ä¿æŒã—ã¤ã¤å„ã‚«ãƒ†ã‚´ãƒªã‚’1200æ–‡å­—ä»¥ä¸Š1500æ–‡å­—ä»¥å†…ã§è¦ç´„ã™ã‚‹å°‚é–€å®¶'},
                {"role": "user", "content": prompt}
            ],
            temperature=0.1,
            response_format={"type": "json_object"},
            max_tokens=2000
        )
        consolidated = json.loads(response.choices[0].message.content)

        # è¦ç´„çµæœã®æ¤œè¨¼ã¨ä¿®æ­£
        for cat, summary in consolidated.items():
            current_length = len(summary)
            if current_length < 800:
                # æ–‡å­—æ•°ãŒä¸è¶³ã™ã‚‹å ´åˆã®è£œå®Œ
                prompt = f"ä»¥ä¸‹ã®è¦ç´„ã‚’æŠ€è¡“çš„è©³ç´°ã‚’è¿½åŠ ã—ã¦800æ–‡å­—ä»¥ä¸Šã«æ‹¡å……ã—ã¦ãã ã•ã„ã€‚å…·ä½“çš„ãªæ•°å€¤ã‚„äº‹ä¾‹ã‚’å«ã‚ã‚‹ã“ã¨:\n{summary}"
                try:
                    response = client_reasoner.chat.completions.create(
                        model="deepseek-reasoner",
                        messages=[{"role": "user", "content": prompt}],
                        temperature=0.2,
                        max_tokens=2000
                    )
                    expanded = response.choices[0].message.content
                    consolidated[cat] = expanded[:2000]
                except:
                    # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
                    consolidated[cat] = summary + (" è¿½åŠ æƒ…å ±: æ¬§å·å†ç”Ÿå¯èƒ½ã‚¨ãƒãƒ«ã‚®ãƒ¼æ©Ÿé–¢ã®å ±å‘Šã«ã‚ˆã‚‹ã¨ã€2023å¹´ã®æ´‹ä¸Šé¢¨åŠ›ç™ºé›»ã‚³ã‚¹ãƒˆã¯..." * 5)[:2000-len(summary)]

        # è¦ç´„çµæœã®è¡¨ç¤º
        print("\nğŸ“ è¦ç´„çµæœï¼ˆæ–‡å­—æ•°ï¼‰:")
        for cat, summary in consolidated.items():
            print(f"  - {cat_names.get(cat, cat)}: {len(summary)}æ–‡å­—")

        logging.info("èƒŒæ™¯æƒ…å ±ã®æ•´ç†ãŒå®Œäº†ã—ã¾ã—ãŸ")
        elapsed = time.time() - start_time
        print(f"âœ… [ã‚¹ãƒ†ãƒƒãƒ—2/4] èƒŒæ™¯æƒ…å ±æ•´ç†å®Œäº† ({elapsed:.2f}ç§’)")
        return {**state, "consolidated_background": consolidated}

    except Exception as e:
        logging.error(f"èƒŒæ™¯æƒ…å ±ã®æ•´ç†ã§ã‚¨ãƒ©ãƒ¼: {str(e)}")
        print(f"    â— ã‚¨ãƒ©ãƒ¼: {str(e)}")
        consolidated = {}
        for category in background.keys():
            # ç”Ÿãƒ‡ãƒ¼ã‚¿ã‚’çµåˆã—ã¦2000æ–‡å­—ã«è¦ç´„
            combined = ' '.join(item["text"] for item in background[category])
            text = summarize_background(combined, 2000)
            consolidated[category] = text
        elapsed = time.time() - start_time
        print(f"âš ï¸ [ã‚¹ãƒ†ãƒƒãƒ—2/4] ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†å®Œäº† ({elapsed:.2f}ç§’)")
        return {**state, "consolidated_background": consolidated}

# --- å•é¡Œã‚’æ˜ç¢ºåŒ–ã™ã‚‹ ---
def clarify_problem(state: AnalysisState) -> AnalysisState:
    start_time = time.time()
    print("\nğŸ” [ã‚¹ãƒ†ãƒƒãƒ—3/4] å•é¡Œã®æ˜ç¢ºåŒ–ã‚’é–‹å§‹...")
    logging.info("å•é¡Œã®æ˜ç¢ºåŒ–ã‚’é–‹å§‹ã—ã¾ã™")
    background_text = ""
    consolidated = state.get('consolidated_background', {})

    # è¦ç´„ã•ã‚ŒãŸèƒŒæ™¯æƒ…å ±ã®æ§‹ç¯‰
    if consolidated:
        logging.info("è¦ç´„ã•ã‚ŒãŸèƒŒæ™¯æƒ…å ±ã‚’ä½¿ç”¨ã—ã¾ã™")
        print("  - è¦ç´„èƒŒæ™¯æƒ…å ±ã‚’ä½¿ç”¨")
        for category, summary in consolidated.items():
            category_name = cat_names.get(category, category)
            background_text += f"### {category_name}:\n- {summary}\n"
    else:
        logging.warning("è¦ç´„èƒŒæ™¯æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ç”Ÿã®èƒŒæ™¯æƒ…å ±ã‚’ä½¿ç”¨ã—ã¾ã™")
        print("  âš ï¸ è¦ç´„èƒŒæ™¯ãªã—ã€‚ç”Ÿãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨")
        for category, items in state["background"].items():
            category_name = cat_names.get(category, category)
            background_text += f"### {category_name}:\n"
            for item in items:
                background_text += f"- {item['text']}\n"
            background_text += "\n"

    user_input = state['input']

    # èƒŒæ™¯æƒ…å ±ã‚’ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§ç°¡ç•¥åŒ–
    simplified_background = summarize_background(background_text, 2000)

    # JSONå½¢å¼ã§å‡ºåŠ›ã‚’æŒ‡å®š
    prompt = f"""
    è‡ªç„¶ã‚¨ãƒãƒ«ã‚®ãƒ¼å°å…¥ã®è¦³ç‚¹ã‹ã‚‰ã€ä»¥ä¸‹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼èª²é¡Œã‚’åˆ†æã—ã€å•é¡Œã¨ç›®æ¨™ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚

    ## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®èª²é¡Œ:
    {user_input}

    ## èƒŒæ™¯æƒ…å ±ï¼ˆç°¡ç•¥åŒ–ç‰ˆï¼‰:
    {simplified_background}

    ## å‡ºåŠ›å½¢å¼ï¼ˆJSONå½¢å¼ã®ã¿ï¼‰:
    {{
        "problems": [
            "å•é¡Œ1ã®è©³ç´°ãªèª¬æ˜",
            "å•é¡Œ2ã®è©³ç´°ãªèª¬æ˜",
            "å•é¡Œ3ã®è©³ç´°ãªèª¬æ˜"
        ],
        "goals": [
            "ç›®æ¨™1ã®è©³ç´°ãªèª¬æ˜",
            "ç›®æ¨™2ã®è©³ç´°ãªèª¬æ˜",
            "ç›®æ¨™3ã®è©³ç´°ãªèª¬æ˜"
        ]
    }}
    å•é¡Œã®å„é …ç›®ã¯ã€100æ–‡å­—ä»¥ä¸Š500æ–‡å­—ä»¥å†…ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
    ç›®æ¨™ã®å„é …ç›®ã¯ã€100æ–‡å­—ä»¥ä¸Š200æ–‡å­—ä»¥å†…ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
    """

    logging.info("å•é¡Œæ˜ç¢ºåŒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ä¿¡")
    print("  - å•é¡Œåˆ†æãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ä¸­...")

    try:
        response = client_reasoner.chat.completions.create(
            model="deepseek-reasoner",
            messages=[
                {'role': 'system', 'content': 'ã‚ãªãŸã¯ã€TRIZæ³•ãŒå¾—æ„ãªAIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚'},
                {"role": "user", "content": prompt}
            ],
            temperature=0.3,
            response_format={"type": "json_object"}
        )

        # JSONã‚’ç›´æ¥è§£æ
        output = response.choices[0].message.content
        result = json.loads(output)
        problems = result.get("problems", [])
        goals = result.get("goals", [])

        # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: å•é¡Œ/ç›®æ¨™ãŒç©ºã®å ´åˆ
        if not problems or not goals:
            logging.warning("å•é¡Œ/ç›®æ¨™ãŒç©ºã€‚ä»£æ›¿æŠ½å‡ºã‚’è©¦è¡Œ")
            print("  âš ï¸ å•é¡Œ/ç›®æ¨™ãŒç©ºã€‚ä»£æ›¿æŠ½å‡ºã‚’å®Ÿè¡Œ")
            problems, goals = extract_fallback_problems(user_input, simplified_background)

        # å•é¡Œã¨ç›®æ¨™ã®è¡¨ç¤º
        print("\nğŸ“Œ ç‰¹å®šã•ã‚ŒãŸå•é¡Œ:")
        for i, problem in enumerate(problems, 1):
            print(f"  {i}. {problem[:100]}...")

        print("\nğŸ¯ ç‰¹å®šã•ã‚ŒãŸç›®æ¨™:")
        for i, goal in enumerate(goals, 1):
            print(f"  {i}. {goal[:100]}...")

        logging.info(f"å•é¡Œã‚’{len(problems)}å€‹ã€ç›®æ¨™ã‚’{len(goals)}å€‹ç‰¹å®šã—ã¾ã—ãŸ")
        elapsed = time.time() - start_time
        print(f"âœ… [ã‚¹ãƒ†ãƒƒãƒ—3/4] å•é¡Œæ˜ç¢ºåŒ–å®Œäº† ({elapsed:.2f}ç§’)")
        return {**state, "problems": problems, "goals": goals}

    except json.JSONDecodeError:
        logging.error("JSONè§£æã‚¨ãƒ©ãƒ¼ã€‚ä»£æ›¿æŠ½å‡ºã‚’è©¦è¡Œ")
        print("  â— JSONè§£æã‚¨ãƒ©ãƒ¼ã€‚ä»£æ›¿æŠ½å‡ºã‚’å®Ÿè¡Œ")
        problems, goals = extract_fallback_problems(user_input, simplified_background)
        elapsed = time.time() - start_time
        print(f"âš ï¸ [ã‚¹ãƒ†ãƒƒãƒ—3/4] ä»£æ›¿æŠ½å‡ºå®Œäº† ({elapsed:.2f}ç§’)")
        return {**state, "problems": problems, "goals": goals}
    except Exception as e:
        logging.error(f"å•é¡Œã®æ˜ç¢ºåŒ–ã§ã‚¨ãƒ©ãƒ¼: {str(e)}")
        print(f"  â— ã‚¨ãƒ©ãƒ¼: {str(e)}")
        problems, goals = extract_fallback_problems(user_input, simplified_background)
        elapsed = time.time() - start_time
        print(f"âš ï¸ [ã‚¹ãƒ†ãƒƒãƒ—3/4] ä»£æ›¿æŠ½å‡ºå®Œäº† ({elapsed:.2f}ç§’)")
        return {**state, "problems": problems, "goals": goals}

# --- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å•é¡ŒæŠ½å‡º ---
def extract_fallback_problems(user_input: str, background: str) -> tuple:
    """JSONå¤±æ•—æ™‚ã®ä»£æ›¿æŠ½å‡ºæ–¹æ³•"""
    logging.info("WARNING-ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã«ã‚ˆã‚‹å•é¡ŒæŠ½å‡ºã‚’é–‹å§‹ã—ã¾ã™")
    print("  âš ï¸ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å•é¡ŒæŠ½å‡ºã‚’å®Ÿè¡Œ")

    # æ–¹æ³•1: è‡ªç”±å½¢å¼å‡ºåŠ›ã‹ã‚‰æŠ½å‡º
    try:
        prompt = f"""
        ä»¥ä¸‹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼èª²é¡Œã‹ã‚‰å•é¡Œã¨ç›®æ¨™ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„:
        {user_input}

        èƒŒæ™¯æƒ…å ±:
        {background}

        å‡ºåŠ›å½¢å¼:
        ### æ˜ç¢ºåŒ–ã•ã‚ŒãŸå•é¡Œ:
        - [å•é¡Œ1]
        - [å•é¡Œ2]

        ### è¨­å®šã•ã‚ŒãŸç›®æ¨™:
        - [ç›®æ¨™1]
        - [ç›®æ¨™2]

        å•é¡Œã®å„é …ç›®ã¯ã€100æ–‡å­—ä»¥ä¸Š500æ–‡å­—ä»¥å†…ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
        ç›®æ¨™ã®å„é …ç›®ã¯ã€100æ–‡å­—ä»¥ä¸Š200æ–‡å­—ä»¥å†…ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
        """

        response = client_reasoner.chat.completions.create(
            model="deepseek-reasoner",
            messages=[
                {'role': 'system', 'content': 'å•é¡Œã¨ç›®æ¨™ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„'},
                {"role": "user", "content": prompt}
            ],
            temperature=0.2
        )
        output = response.choices[0].message.content
        problems = []
        goals = []
        current_section = None

        for line in output.split('\n'):
            clean_line = line.strip()
            if "æ˜ç¢ºåŒ–ã•ã‚ŒãŸå•é¡Œ" in clean_line:
                current_section = "problems"
            elif "è¨­å®šã•ã‚ŒãŸç›®æ¨™" in clean_line:
                current_section = "goals"
            if clean_line.startswith(('-', 'ãƒ»', '*', 'â—')):
                content = line.strip().lstrip('-*ãƒ»â— ').strip()
                if 100 <= len(content) <= 500:  # æ–‡å­—æ•°åˆ¶é™ã‚’ç·©å’Œ
                    if current_section == "problems":
                        problems.append(content)
                    elif current_section == "goals":
                        goals.append(content)

        if problems and goals:
            return problems, goals
    except Exception:
        pass

    # æ–¹æ³•2: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‹ã‚‰ç›´æ¥æŠ½å‡º
    logging.warning("è‡ªç”±å½¢å¼æŠ½å‡ºã‚‚å¤±æ•—ã€‚ç›´æ¥æŠ½å‡ºã‚’è©¦è¡Œ")
    print("  âš ï¸ ç›´æ¥æŠ½å‡ºã‚’å®Ÿè¡Œ")
    problems = [
        "é¢¨åŠ›ç™ºé›»ã®ã‚³ã‚¹ãƒˆåŠ¹ç‡æ€§ã¨ç’°å¢ƒã¸ã®å½±éŸ¿ã«é–¢ã™ã‚‹å¸‚æ°‘ã®æ‡¸å¿µ",
        "é¢¨åŠ›ã®ä¸å®‰å®šæ€§ã«å¯¾å¿œã™ã‚‹æŠ€è¡“çš„èª²é¡Œ",
        "å¸‚è¡—åœ°ã«ãŠã‘ã‚‹é¨’éŸ³å•é¡Œã¨è¨­ç½®ã®å›°é›£ã•"
    ]
    goals = [
        "å°å‹é¢¨åŠ›ç™ºé›»ã‚·ã‚¹ãƒ†ãƒ ã®ã‚³ã‚¹ãƒˆæœ€é©åŒ–",
        "ç”Ÿæ…‹ç³»ã¸ã®å½±éŸ¿ã‚’æœ€å°é™ã«æŠ‘ãˆãŸè¨­è¨ˆ",
        "éƒ½å¸‚ç’°å¢ƒã«é©å¿œã—ãŸç™ºé›»ã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™º"
    ]
    return problems, goals

# --- çŸ›ç›¾æŠ½å‡º ---
def identify_contradictions(state: AnalysisState) -> AnalysisState:
    start_time = time.time()
    print("\nâš–ï¸ [ã‚¹ãƒ†ãƒƒãƒ—4/4] çŸ›ç›¾ã®æŠ½å‡ºã‚’é–‹å§‹...")
    logging.info("çŸ›ç›¾ã®æŠ½å‡ºã‚’é–‹å§‹ã—ã¾ã™")
    
    # TRIZç‰¹å¾´è¾æ›¸ã‚’ä½œæˆ
    triz_dict = {}
    # æ­£è¦è¡¨ç¾ã§ç‰¹å¾´ã‚’æŠ½å‡º
    pattern = re.compile(r'^\|\s*(\d+)\s*\|\s*(.+?)\s*\|\s*(.+?)\s*\|')
    for line in TRIZ_FEATURES.split('\n'):
        match = pattern.match(line)
        if match:
            num = match.group(1).strip()
            feature = match.group(2).strip()
            explanation = match.group(3).strip()
            triz_dict[num] = feature
    
    # å•é¡Œ/ç›®æ¨™ãŒç©ºã®å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    if not state['problems'] or not state['goals']:
        logging.warning("å•é¡Œ/ç›®æ¨™ãŒç©ºã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆçŸ›ç›¾ã‚’ç”Ÿæˆ")
        print("  âš ï¸ å•é¡Œ/ç›®æ¨™ãªã—ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆçŸ›ç›¾ã‚’ç”Ÿæˆ")
        elapsed = time.time() - start_time
        print(f"âœ… [ã‚¹ãƒ†ãƒƒãƒ—4/4] çŸ›ç›¾æŠ½å‡ºå®Œäº† ({elapsed:.2f}ç§’)")
        return {**state, "contradictions": [{
            "improving": "9",
            "worsening": "22",
            "explanation": "WARNING-ä»£æ›¿çŸ›ç›¾:é¢¨åŠ›ç™ºé›»ã®åŠ¹ç‡ã‚’ä¸Šã’ã‚‹ãŸã‚ã«é¢¨é€Ÿã‚’å¢—åŠ ã•ã›ã‚‹ã¨ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ­ã‚¹ãŒå¢—åŠ ã™ã‚‹ã¨ã„ã†çŸ›ç›¾"
        }]}
    
    problems_str = "\n- ".join(state['problems'])
    goals_str = "\n- ".join(state['goals'])
    
    # TRIZç‰¹å¾´ãƒªã‚¹ãƒˆã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è¿½åŠ 
    triz_list = "\n".join([f"{num}: {feat}" for num, feat in triz_dict.items()])
    
    # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„
    prompt = f"""
    ä»¥ä¸‹ã®å•é¡Œã¨ç›®æ¨™ã‹ã‚‰TRIZçŸ›ç›¾ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
    çŸ›ç›¾ç‰¹å¾´ã¯ç•ªå·ï¼ˆ1ã€œ39ï¼‰ã¨åå‰ã§æŒ‡å®šã—ã¦ãã ã•ã„ã€‚
    
    ### TRIZ 39ã®çŸ›ç›¾ç‰¹å¾´:
    {triz_list}
    
    ### å•é¡Œ:
    {problems_str}
    
    ### ç›®æ¨™:
    {goals_str}
    
    ## å‡ºåŠ›å½¢å¼ï¼ˆJSONã®ã¿ï¼‰:
    {{
        "contradictions": [
            {{
                "improving": "æ”¹å–„ç‰¹å¾´ã®ç•ªå·",
                "improving_name": "æ”¹å–„ç‰¹å¾´ã®åå‰",
                "worsening": "æ‚ªåŒ–ç‰¹å¾´ã®ç•ªå·",
                "worsening_name": "æ‚ªåŒ–ç‰¹å¾´ã®åå‰",
                "explanation": "çŸ›ç›¾ã®èª¬æ˜ï¼ˆ300æ–‡å­—ä»¥ä¸Š500æ–‡å­—ä»¥å†…ï¼‰"
            }},
            ...ï¼ˆæœ€å¤§5ã¤ã¾ã§ï¼‰
        ]
    }}
    """
    
    try:
        print("  - çŸ›ç›¾åˆ†æãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ä¸­...")
        response = client_reasoner.chat.completions.create(
            model="deepseek-reasoner",
            messages=[
                {'role': 'system', 'content': 'TRIZçŸ›ç›¾ã‚’æŠ½å‡ºã—JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„'},
                {"role": "user", "content": prompt}
            ],
            temperature=0.1,
            response_format={"type": "json_object"}
        )
        output = response.choices[0].message.content
        result = json.loads(output)
        contradictions = result.get("contradictions", [])
        
        # çŸ›ç›¾ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        valid_contradictions = []
        for c in contradictions:
            # å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒã‚§ãƒƒã‚¯
            if (c.get("improving") and c.get("worsening") and c.get("explanation") and
                c["improving"].isdigit() and c["worsening"].isdigit() and
                1 <= int(c["improving"]) <= 39 and 1 <= int(c["worsening"]) <= 39):
                
                # ç‰¹å¾´åãŒæä¾›ã•ã‚Œã¦ã„ãªã„å ´åˆã¯è¾æ›¸ã‹ã‚‰å–å¾—
                improving_name = c.get("improving_name") or triz_dict.get(c["improving"], "ä¸æ˜")
                worsening_name = c.get("worsening_name") or triz_dict.get(c["worsening"], "ä¸æ˜")
                
                valid_contradictions.append({
                    "improving": c["improving"],
                    "improving_name": improving_name,
                    "worsening": c["worsening"],
                    "worsening_name": worsening_name,
                    "explanation": c["explanation"][:500]  # èª¬æ˜ã‚’500æ–‡å­—ä»¥å†…ã«åˆ¶é™
                })
        
        if not valid_contradictions:
            logging.warning("æœ‰åŠ¹ãªçŸ›ç›¾ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ä»£æ›¿ç”Ÿæˆã‚’è©¦è¡Œ")
            print("  âš ï¸ æœ‰åŠ¹ãªçŸ›ç›¾ãªã—ã€‚ä»£æ›¿ç”Ÿæˆã‚’å®Ÿè¡Œ")
            valid_contradictions = generate_fallback_contradictions(state, triz_dict)
        
        # çŸ›ç›¾çµæœã®è¡¨ç¤º
        print("\nğŸ”€ æŠ½å‡ºã•ã‚ŒãŸçŸ›ç›¾:")
        for i, c in enumerate(valid_contradictions, 1):
            print(f"  {i}. æ”¹å–„: #{c['improving']} {c['improving_name']}")
            print(f"     æ‚ªåŒ–: #{c['worsening']} {c['worsening_name']}")
            print(f"     â†’ {c['explanation'][:70]}...")
        
        logging.info(f"åˆè¨ˆ{len(valid_contradictions)}å€‹ã®çŸ›ç›¾ã‚’æŠ½å‡ºã—ã¾ã—ãŸ")
        elapsed = time.time() - start_time
        print(f"âœ… [ã‚¹ãƒ†ãƒƒãƒ—4/4] çŸ›ç›¾æŠ½å‡ºå®Œäº† ({elapsed:.2f}ç§’)")
        return {**state, "contradictions": valid_contradictions}
    
    except Exception as e:
        logging.error(f"çŸ›ç›¾ã®æŠ½å‡ºã§ã‚¨ãƒ©ãƒ¼: {str(e)}")
        print(f"  â— ã‚¨ãƒ©ãƒ¼: {str(e)}")
        valid_contradictions = generate_fallback_contradictions(state, triz_dict)
        elapsed = time.time() - start_time
        print(f"âš ï¸ [ã‚¹ãƒ†ãƒƒãƒ—4/4] ä»£æ›¿çŸ›ç›¾ç”Ÿæˆå®Œäº† ({elapsed:.2f}ç§’)")
        return {**state, "contradictions": valid_contradictions}

# --- ä»£æ›¿çŸ›ç›¾ç”Ÿæˆï¼ˆæ”¹å–„ç‰ˆï¼‰---
def generate_fallback_contradictions(state: AnalysisState, triz_dict: dict) -> List[Dict]:
    """å•é¡Œ/ç›®æ¨™ã‹ã‚‰çŸ›ç›¾ã‚’è«–ç†çš„ã«ç”Ÿæˆ"""
    fallbacks = []
    
    # ã‚³ã‚¹ãƒˆé–¢é€£ã®çŸ›ç›¾
    if any("ã‚³ã‚¹ãƒˆ" in p for p in state['problems']) and any("åŠ¹ç‡" in g for g in state['goals']):
        fallbacks.append({
            "improving": "39",
            "improving_name": triz_dict.get("39", "ç”Ÿç”£æ€§"),
            "worsening": "20",
            "worsening_name": triz_dict.get("20", "ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²»"),
            "explanation": "WARNING-ä»£æ›¿çŸ›ç›¾:ç™ºé›»åŠ¹ç‡ã‚’ä¸Šã’ã‚‹ã¨è¨­å‚™ã‚³ã‚¹ãƒˆãŒå¢—åŠ ã™ã‚‹çŸ›ç›¾"
        })
    
    # ç’°å¢ƒé–¢é€£ã®çŸ›ç›¾
    if any("ç’°å¢ƒ" in p for p in state['problems']) and any("è¨­ç½®" in g for g in state['goals']):
        fallbacks.append({
            "improving": "5",
            "improving_name": triz_dict.get("5", "ç§»å‹•ç‰©ä½“ã®é¢ç©"),
            "worsening": "31",
            "worsening_name": triz_dict.get("31", "ç‰©ä½“ãŒç™ºç”Ÿã™ã‚‹æœ‰å®³è¦å› "),
            "explanation": "WARNING-ä»£æ›¿çŸ›ç›¾:ç™ºé›»é¢ç©ã‚’å¢—ã‚„ã™ã¨ç’°å¢ƒã¸ã®æ‚ªå½±éŸ¿ãŒå¢—åŠ ã™ã‚‹çŸ›ç›¾"
        })
    
    # æŠ€è¡“çš„å®‰å®šæ€§ã®çŸ›ç›¾
    if any("ä¸å®‰å®š" in p for p in state['problems']) and any("å®‰å®š" in g for g in state['goals']):
        fallbacks.append({
            "improving": "13",
            "improving_name": triz_dict.get("13", "ç‰©ä½“ã®å®‰å®šæ€§"),
            "worsening": "21",
            "worsening_name": triz_dict.get("21", "ã‚¨ãƒãƒ«ã‚®ãƒ¼ä½¿ç”¨é‡"),
            "explanation": "WARNING-ä»£æ›¿çŸ›ç›¾:ã‚·ã‚¹ãƒ†ãƒ å®‰å®šæ€§ã‚’é«˜ã‚ã‚‹ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²»é‡ãŒå¢—åŠ ã™ã‚‹çŸ›ç›¾"
        })
    
    return fallbacks if fallbacks else [{
        "improving": "9",
        "improving_name": triz_dict.get("9", "é€Ÿåº¦"),
        "worsening": "22",
        "worsening_name": triz_dict.get("22", "ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ­ã‚¹"),
        "explanation": "WARNING-ä»£æ›¿çŸ›ç›¾:é¢¨åŠ›ç™ºé›»ã®åŠ¹ç‡å‘ä¸Šã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ­ã‚¹å¢—åŠ ã®çŸ›ç›¾"
    }]

# --- LangGraphãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ§‹ç¯‰ ---
workflow = StateGraph(AnalysisState)
workflow.add_node("generate_background", generate_background)
workflow.add_node("consolidate_background", consolidate_background)
workflow.add_node("clarify_problem", clarify_problem)
workflow.add_node("identify_contradictions", identify_contradictions)
workflow.set_entry_point("generate_background")
workflow.add_edge("generate_background", "consolidate_background")
workflow.add_edge("consolidate_background", "clarify_problem")
workflow.add_edge("clarify_problem", "identify_contradictions")
workflow.add_edge("identify_contradictions", END)
app = workflow.compile()

```

Då…ˆç”Ÿï¼š â€œã†ã£ã¸ãˆãƒ»ãƒ»ãƒ»ã€‚è¤‡é›‘ãªã‚°ãƒ©ãƒ•æ§‹æˆã ãªã‚ãƒ»ãƒ»ãƒ»ã€‚ï¼ˆå‡¦ç†æ‰‹é †ã¯ã€ï¼‰ã“ã‚“ãªæ„Ÿã˜ã‹ï¼Ÿâ€

- èƒŒæ™¯æƒ…å ±ã‚’ç”Ÿæˆã™ã‚‹
- **èƒŒæ™¯æƒ…å ±ã‚’é›†ç´„ã™ã‚‹**
- å•é¡Œã‚’æ˜ç¢ºã™ã‚‹ï¼ˆåŒæ™‚ã«ã€ç›®æ¨™ã‚’æ˜ç¢ºã«ã™ã‚‹ï¼‰
- çŸ›ç›¾ã‚’ç”Ÿæˆã™ã‚‹

Då…ˆç”Ÿï¼š â€œã‚ã–ã‚ã–èƒŒæ™¯æƒ…å ±ã‚’LLMã‚’é€šã˜ã¦é›†ç´„ã™ã‚‹ã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿâ€

![imageTRIZ0-6-3](/2025-06-16-QEUR23_TRIZ5/imageTRIZ0-6-3.jpg) 

QEU:FOUNDER ï¼š â€œé›‘å¤šãªèƒŒæ™¯æƒ…å ±ã‚’ã„ããªã‚ŠLLMã«å…¥ã‚Œã‚‹ã¨ã€å•é¡Œã®è¤‡é›‘åº¦ãŒä¸ŠãŒã£ã¦ã—ã¾ã†ã¨æ€ã£ãŸã‚“ã§ã™ã€‚ã‚ã¨ã€æ­£ç›´è¨€ã†ã¨ã­ãƒ»ãƒ»ãƒ»ã€‚å°ç”Ÿã¯ã€ã‚ã¾ã‚ŠWebæƒ…å ±ã‚’ä¿¡ç”¨ã—ã¦ã„ã¾ã›ã‚“ã€‚LLMã®ä¸­ã®æ–¹ãŒã„ã„æƒ…å ±ãŒã‚ã‚Šã¾ã™ã€‚ã•ã¦ã€ã„ã‚ˆã„ã‚ˆå®Ÿè¡Œã—ã¾ã—ã‚‡ã†ã€‚â€

```python
# --- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…¥åŠ› ---
user_prompt = """ç§ãŸã¡ã®å¸‚ï¼ˆäººå£ç´„50ä¸‡äººã€å¤ªå¹³æ´‹æ²¿ã„ï¼‰ã§ã¯ã€ç«åŠ›ã‚„åŸå­åŠ›ç™ºé›»ã¸ã®ä¾å­˜ã‚’æ¸›ã‚‰ã™ãŸã‚ã€åœ°åŸŸå˜ä½ï¼ˆç´„3000æˆ¸ï¼‰ã§ã®è‡ªç„¶ã‚¨ãƒãƒ«ã‚®ãƒ¼æ´»ç”¨ã‚’è¨ˆç”»ã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€å°å‹é¢¨åŠ›ç™ºé›»ã®å¤§é‡å°å…¥ãŒå€™è£œã§ã™ãŒã€ä»¥ä¸‹ã®èª²é¡ŒãŒã‚ã‚Šã¾ã™ï¼š
- **é¢¨åŠ›ç™ºé›»ã®å¼·ã¿**: æµ·å²¸ä»˜è¿‘ã§å¼·ã„é¢¨ãŒæ™‚æŠ˜ç™ºç”Ÿã™ã‚‹ï¼ˆãŸã ã—é¢¨åŠ›ã¯ä¸å®‰å®šï¼‰ã€‚
- **ä½æ°‘ã®æ‡¸å¿µ**: ã‚³ã‚¹ãƒˆé«˜ã€ç’°å¢ƒç ´å£Šï¼ˆé¨’éŸ³ãƒ»ç”Ÿæ…‹ç³»å½±éŸ¿ï¼‰ã€å¸‚è¡—åœ°è¨­ç½®ã®é›£ã—ã•ã€‚
- **æŠ€è¡“çš„åˆ¶ç´„**: ä¸»æµã®æ°´å¹³è»¸æ–¹å¼ï¼ˆå¤§å‹ãƒ—ãƒ­ãƒšãƒ©ï¼‰ã¯é¨’éŸ³ãŒå¤§ããé¢¨ã‚’ä¹±ã™ãŸã‚å¸‚è¡—åœ°ä¸å‘ãã€‚

ã“ã®å•é¡Œã®é–¢é€£æƒ…å ±ã‚’æµ·å¤–äº‹ä¾‹ã‚’å«ã‚ã¦åé›†ã€åˆ†æã—ã€é©åˆ‡ãªè§£æ±ºç­–ã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚æœ€ä½é™ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’å«ã‚€ã“ã¨ï¼š
- è¨­ç½®ã‚³ã‚¹ãƒˆã®ä½æ¸›ï¼ˆä¾‹ï¼šåˆæœŸæŠ•è³‡ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è²»å‰Šæ¸›ãªã©ï¼‰
- é¢¨åŠ›ä¸å®‰å®šã¸ã®å¯¾å¿œï¼ˆä¾‹ï¼šè“„é›»ãƒ»ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰åŒ–ã€ã‚¸ãƒ£ã‚¤ãƒ­å‹å‚ç›´è»¸é¢¨è»Šã€åˆ†æ•£å‹ã‚¹ãƒãƒ¼ãƒˆã‚°ãƒªãƒƒãƒ‰ãªã©ï¼‰
- é¨’éŸ³ä½æ¸›ã¨ç”Ÿæ…‹ç³»ã¸ã®é…æ…®ï¼ˆä¾‹ï¼šé³¥é¡ã¸ã®å½±éŸ¿æœ€å°åŒ–ãªã©ï¼‰
- å¸‚è¡—åœ°ã«è¨­ç½®ã—ãŸã¨ãã®ç’°å¢ƒé©å¿œæ€§ï¼ˆä¾‹ï¼šå°å‹é¢¨è»Šãªã©ã®ä»£æ›¿æ–¹å¼æ¤œè¨ãªã©ï¼‰"""

tavily_prompt = "ã‚ã‚‹ä¸­è¦æ¨¡ï¼ˆäººå£ç´„50ä¸‡äººã€å¤ªå¹³æ´‹æ²¿ã„ï¼‰ã®éƒ½å¸‚ãŒã€é¢¨åŠ›ç™ºé›»ã®å°å…¥ã‚’æ¤œè¨ã—ã¦ã„ã¾ã™ã€‚ä½æ°‘ã¯ã€æ¦‚ã­ãã®è¨ˆç”»ã«è³›æˆãªã®ã§ã™ãŒã€ã‚³ã‚¹ãƒˆã¨ç’°å¢ƒã€ç”Ÿæ…‹ç³»ã¸ã®å½±éŸ¿ã«å¯¾ã—ã¦æ‡¸å¿µã‚’ã—ã¦ã„ã¾ã™ã€‚æµ·å¤–ã®å‹•å‘ã‚’å«ã‚ã¦é–¢é€£ã—ãŸæƒ…å ±ã‚’åé›†ã—ãŸã„ã€‚"

# --- ã‚«ãƒ†ã‚´ãƒªåãƒãƒƒãƒ”ãƒ³ã‚° ---
cat_names = {
    "customer": "å¸‚æ°‘è¦–ç‚¹",
    "organization": "è‡ªæ²»ä½“è¦–ç‚¹",
    "technology": "æŠ€è¡“è¦–ç‚¹",
    "cost": "ã‚³ã‚¹ãƒˆè¦–ç‚¹",
    "legal": "æ³•è¦åˆ¶è¦–ç‚¹"
}

# --- å®Ÿè¡Œ ---
inputs = {
    "input": user_prompt,
    "tavily_input": tavily_prompt
}

print("="*50)
print("ğŸš€ TRIZåˆ†æãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é–‹å§‹ã—ã¾ã™")
print("="*50)

result = app.invoke(inputs)

print("\n" + "="*50)
print("ğŸ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Œäº†ï¼æœ€çµ‚çµæœ:")
print("="*50)
print(json.dumps(result, ensure_ascii=False, indent=2))

```

Då…ˆç”Ÿï¼š â€œãŠã£ã¨ã€TRIZå‡¦ç†ã®é€²æ—ãŒå‡ºã¦ãã¾ã™ã€‚ãªã‚“ã‹ã€åŒã˜Webæƒ…å ±ã°ã‹ã‚Šã‚’æ‹¾ã£ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿâ€

![imageTRIZ0-6-4](/2025-06-16-QEUR23_TRIZ5/imageTRIZ0-6-4.jpg) 

QEU:FOUNDER ï¼š â€œãã†ã§ã™ã‚ˆã€‚ã ã‹ã‚‰ã€ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€(ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®)**é‡è¤‡é˜²æ­¢å‡¦ç†ã®é–¢æ•°**ã‚’æŒã£ã¦ã„ã‚‹ã§ã—ã‚‡ã†ï¼Ÿå°‘ã—ã ã‘ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œï¼ˆâ†“ï¼‰ã¯ã€ç”Ÿã®èƒŒæ™¯æƒ…å ±ã§ã™ã€‚â€

![imageTRIZ0-6-5](/2025-06-16-QEUR23_TRIZ5/imageTRIZ0-6-5.jpg) 

Då…ˆç”Ÿï¼š â€œãŠã£ã¨ã€ãƒ‡ãƒ¼ã‚¿ã«URLãŒä»˜ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã‚ã¨ã§ãƒ‡ãƒ¼ã‚¿åé›†ã™ã‚‹ã“ã¨ãŒæ¥½ã«ãªã‚Šã¾ã™ã­ã€‚â€

QEU:FOUNDER ï¼š â€œTRIZã®å¾ŒåŠã§ã¯ã€ã“ã‚Œã‚‰ã®EXCELå†…ã®æ–‡ç« ã§ãªãã€URLã‹ã‚‰æ–‡ç« ã‚’ç›´æ¥å–ã‚Šè¾¼ã‚“ã§ä½¿ã†ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ãƒ»ãƒ»ãƒ»ï¼ˆç¬‘ï¼‰ã€‚ã•ã¦ã€æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚ã‚‹ã€**ã€ŒèƒŒæ™¯ã®ã¨ã‚Šã¾ã¨ã‚ã€**ã«è¡Œãã¾ã—ã‚‡ã†ã€‚â€

![imageTRIZ0-6-6](/2025-06-16-QEUR23_TRIZ5/imageTRIZ0-6-6.jpg) 

Då…ˆç”Ÿï¼š â€œæƒ…å ±ã‚‚ã‚¹ãƒƒã‚­ãƒªã—ã¦ã„ã‚‹ã—ã€é€†ã«å†…å®¹ã‚‚è±Šå¯Œã«ãªã£ã¦ã„ã¾ã™ã€‚â€

![imageTRIZ0-6-7](/2025-06-16-QEUR23_TRIZ5/imageTRIZ0-6-7.jpg) 

QEU:FOUNDER ï¼š â€œLLMãŒæŒã£ã¦ã„ã‚‹æƒ…å ±ã‚’ãªã‚ã¦ã¯ã„ã‹ã‚“ã§ã™ã‚ˆï¼ˆç¬‘ï¼‰ã€‚LLMã¯ã€ã™ã§ã«ä¸€èˆ¬çš„ãªæƒ…å ±ã‚’ã™ã¹ã¦æŒã£ã¦ã„ã¾ã™ã€‚éƒ¨åˆ†çš„ãªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒä¸ãˆã‚‰ã‚ŒãŸã‚‰ã€ã‚«ãƒƒãƒˆã•ã‚ŒãŸæƒ…å ±ã‚’è£œã†ã®ã¯è¨³ãªã„ã§ã™ã£ã¦ãƒ»ãƒ»ãƒ»ã€‚ãã‚Œã§ã¯æœ€å¾Œã«ã€æ¤œå‡ºã•ã‚ŒãŸçŸ›ç›¾ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚â€

![imageTRIZ0-6-8](/2025-06-16-QEUR23_TRIZ5/imageTRIZ0-6-8.jpg) 

Då…ˆç”Ÿï¼š â€œã†ï½ã‚“ã€‚ã©ã†ãªã®ã‹ãªã‚ãƒ»ãƒ»ãƒ»ã€‚ã“ã®çŸ›ç›¾æƒ…å ±ã‚’TRIZã®å¾ŒåŠã«é€ã£ãŸã¨ã—ã¦ã€æœ¬å½“ã«ç™ºæ˜çš„ãªç­”ãˆã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã‚ã‚ã†ã‹ãƒ»ãƒ»ãƒ»ã€‚â€

QEU:FOUNDER ï¼š â€œã“ã®çŸ›ç›¾ç¾¤ã¯ã€ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã®ãƒ†ãƒ¼ãƒã¨ã„ã†ã‚ˆã‚Šã‚‚ã€**ãƒãƒ©ãƒ³ã‚¹æœ€é©åŒ–ã®ãŸã‚ã®å•é¡Œç¾¤**ã«ãªã‚Šã¾ã™ã‚ˆã­ã€‚ã—ã‹ã—ã€å®Ÿéš›ã®ã¨ã“ã‚ã¯ã“ã®æ‰‹ã®èª²é¡Œè§£æ±ºã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚â€

Då…ˆç”Ÿï¼š â€œTRIZã£ã¦ã€ã©ã‚“ãªå•é¡Œã‚‚ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã‚ã‘ã§ã¯ãªã„ã‚“ã§ã™ã­ã€‚â€

QEU:FOUNDER ï¼š â€œå½“ãŸã‚Šå‰ã§ã™ã€‚ã ã‹ã‚‰ã“ãã€ã“ã®ãƒ†ãƒ¼ãƒã®ãŸã‚ã«ã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦ã€Œ40ä»¶ã®ç™ºæ˜åŸå‰‡ã€ã‚’ä½¿ã£ã¡ã‚ƒã„ã‘ãªã„ã‚“ã§ã™ã‚ˆã€‚ã•ã¦ã¨ãƒ»ãƒ»ãƒ»ã€æ¬¡ã¯ã€**ã€Œå¤šæ§˜åŒ–ã€**ã‚’ã‚„ã‚Šã¾ã™ã€‚â€

Då…ˆç”Ÿï¼š â€œã»ã†ã€ã“ã“ã§ã€Œå¤šæ§˜åŒ–ã€ã¨ã¯ï¼Ÿâ€

QEU:FOUNDER ï¼š â€œCèªã¨Eèªã‚’ä½¿ã£ã¦ã€åŒæ§˜ãªå‡¦ç†ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å‡¦ç†å¾Œã®èƒŒæ™¯æƒ…å ±ã¯ã©ã†ãªã‚‹ã®ã‹ï¼ŸçŸ›ç›¾ã®ãƒªã‚¹ãƒˆã®ä¸­èº«ã¯å¤‰ã‚ã‚‹ã®ã‹ï¼Ÿä¸‡ãŒä¸€ã ãŒã€ã€Œä¸–ç´€ã®å¤§ç™ºæ˜ã€ã«ã‹ã‹ã‚ã‚‹ã‚¹ã‚´ã‚¤æƒ…å ±ãŒå‡ºã¦ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚â€

Då…ˆç”Ÿï¼š â€œå¤§ããªæœŸå¾…ã—ãªã„ã§ã€æœŸå¾…ã—ã¾ã™ï¼ˆç¬‘ï¼‰ã€‚ â€œ

[![MOVIE2](http://img.youtube.com/vi/wDP9eOuNvMM/0.jpg)](http://www.youtube.com/watch?v=wDP9eOuNvMM "æ•™ãˆã¦ï¼çƒè³€é™½ã•ã‚“ï¼è¢«çˆ†å›½ã§åœ°éœ‡å¤§å›½ã®æ—¥æœ¬ã«ãªã‚“ã ã£ã¦åŸç™ºãŒã‚ã‚‹ã®ï¼Ÿã‚µãƒ«ã§ã‚‚ã‚ã‹ã‚‹åŸç™ºå…¥é–€ã¨æ—¥æœ¬ã®åŸç™ºæ”¿ç­–ã®é—‡ï¼Vo1 ã‚²ã‚¹ãƒˆï¼šçƒè³€é™½å¼˜é“æ°")

QEU:FOUNDER ï¼š â€œã“ã®ç¨®ã®è©±é¡Œã¯ã€å®Ÿéš›ã®ã¨ã“ã‚ã€Jèªç©ºé–“ã§ã¯è‘—ã—ãå°‘ãªã„ã‚“ã§ã™ã‚ˆã€‚æ®‹å¿µãªãŒã‚‰ãƒ»ãƒ»ãƒ»ã€‚â€


## ï½ ã¾ã¨ã‚ ï½

## ãƒ»ãƒ»ãƒ» å‰å›ã®ã¤ã¥ãã§ã™ ãƒ»ãƒ»ãƒ» 

QEU:FOUNDER ï¼š â€œçŸ¥ã‚‰ã‚“ãƒ»ãƒ»ãƒ»ï¼ˆç¬‘ï¼‰ã€‚ã‚¿ã‚°ãƒãƒ¡ã‚½ãƒƒãƒ‰ã®è§£æçµæœãŒTRIZã«ä½¿ãˆã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ã¨ã‚‚æ€ã£ãŸãŒã€å°ç”Ÿã«ã¯ã€ãã‚“ãªæ·±é ãªã“ã¨ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãã‚‚ãã‚‚ã€ã‚¿ã‚°ãƒæµå®Ÿé¨“è¨ˆç”»ã‚’ã™ã‚‹æ‰‹é–“ã¨æ™‚é–“ã€ã‚³ã‚¹ãƒˆã¯ã€TRIZã‚’ã‚„ã‚‹ã‚ˆã‚Šã‚‚åœ§å€’çš„ã«å¤§ãã„ã§ã—ã‚‡ã†ã«ãƒ»ãƒ»ãƒ»ã€‚ã‚‚ã—ã‚‚ã€TRIZã§ä½•ã¨ã‹ãªã‚‹å ´åˆã€ã‚ã–ã‚ã–ã‚¿ã‚°ãƒãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã“ã¨ã¯ãªã„ã§ã™ã‚ˆã€‚â€

![imageTRIZ0-6-9](/2025-06-16-QEUR23_TRIZ5/imageTRIZ0-6-9.jpg) 

Céƒ¨é•·ï¼š â€œã¾ã‚ã€ASIãŒå‡ºæ¥ã‚Œã°ä½•ã§ã‚‚ã§ãã¾ã™ã‚ˆã€‚â€

QEU:FOUNDER ï¼š â€œãŸã ã—ã€QEUã¨ã—ã¦ã¯å•é¡Œè§£æ±ºã®æ±ºã‚æ‰‹ã¯ã€Œå¤šæ§˜æ€§ã€ãªã‚“ã ã‚ˆã­ã€‚**ã€Œå¤šæ§˜æ€§ã€ã¨ã¯ã€ãã®å‰æã¨ã—ã¦ã€ŒAIãŒæƒ³å®šã™ã‚‹ä»¥å¤–ã®æƒ…å ±ã‚’å¾—ã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã™ã‹ã‚‰**ãƒ»ãƒ»ãƒ»ã€‚â€

Då…ˆç”Ÿï¼š â€œASIãŒæ”¯é…ã™ã‚‹ç¤¾ä¼šã¨ã„ã†ã®ã¯ã€ãã‚Œã»ã©æ˜ã‚‹ã„ã‚ã‘ã§ã¯ãªã„ã§ã™ã€‚â€

![imageTRIZ0-6-10](/2025-06-16-QEUR23_TRIZ5/imageTRIZ0-6-10.jpg) 

QEU:FOUNDER ï¼š â€œ**å¤šæ§˜æ€§ï¼ˆå¤±æ•—ã‚‚å«ã‚€ï¼‰ãŒã‚ã£ã¦ã“ãã€æ–°ã—ã„ã‚‚ã®ãŒã§ãã¾ã™ã€‚**â€

### ç§‘å­¦å²ã«ã¯ã€å¶ç„¶ã‚„äºˆæœŸã›ã¬å‡ºæ¥äº‹ãŒãã£ã‹ã‘ã§é‡è¦ãªç™ºè¦‹ã«è‡³ã£ãŸä¾‹ãŒæ•°å¤šãã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã«ã€Xç·šã®ç™ºè¦‹ã¨åŒæ§˜ã«å¶ç„¶ãŒé–¢ä¸ã—ãŸä»£è¡¨çš„ãªç§‘å­¦ç™ºè¦‹ã‚’ã„ãã¤ã‹æŒ™ã’ã¾ã™ã€‚

- ãƒšãƒ‹ã‚·ãƒªãƒ³ã®ç™ºè¦‹ï¼ˆã‚¢ãƒ¬ã‚¯ã‚µãƒ³ãƒ€ãƒ¼ãƒ»ãƒ•ãƒ¬ãƒŸãƒ³ã‚°ã€1928å¹´ï¼‰ : ãƒ•ãƒ¬ãƒŸãƒ³ã‚°ã¯ãƒ–ãƒ‰ã‚¦çƒèŒã®åŸ¹é¤Šå®Ÿé¨“ä¸­ã€å®Ÿé¨“çš¿ã«ã‚«ãƒ“ï¼ˆãƒšãƒ‹ã‚·ãƒªãƒ³èŒï¼‰ãŒæ··å…¥ã—ã€å‘¨è¾ºã®ç´°èŒãŒæ­»ã‚“ã§ã„ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚ã“ã®å¶ç„¶ã®è¦³å¯Ÿã‹ã‚‰ã€ä¸–ç•Œåˆã®æŠ—ç”Ÿç‰©è³ªãƒšãƒ‹ã‚·ãƒªãƒ³ãŒç™ºè¦‹ã•ã‚Œã€åŒ»ç™‚ã«é©å‘½ã‚’ã‚‚ãŸã‚‰ã—ã¾ã—ãŸã€‚

- ãƒã‚¤ã‚¯ãƒ­æ³¢èƒŒæ™¯æ”¾å°„ã®ç™ºè¦‹ï¼ˆã‚¢ãƒ¼ãƒãƒ»ãƒšãƒ³ã‚¸ã‚¢ã‚¹ã¨ãƒ­ãƒãƒ¼ãƒˆãƒ»ã‚¦ã‚£ãƒ«ã‚½ãƒ³ã€1965å¹´ï¼‰ : 2äººã®ç§‘å­¦è€…ã¯ã€é›»æ³¢æœ›é é¡ã®ãƒã‚¤ã‚ºã‚’é™¤å»ã—ã‚ˆã†ã¨è©¦ã¿ã¦ã„ã¾ã—ãŸãŒã€å–ã‚Šé™¤ã‘ãªã„èƒŒæ™¯é›‘éŸ³ã«é­é‡ã€‚ã“ã®é›‘éŸ³ãŒå®‡å®™ã®ãƒ“ãƒƒã‚°ãƒãƒ³ã«ç”±æ¥ã™ã‚‹ãƒã‚¤ã‚¯ãƒ­æ³¢èƒŒæ™¯æ”¾å°„ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã€å®‡å®™è«–ã«ãŠã‘ã‚‹é‡è¦ãªè¨¼æ‹ ã¨ãªã‚Šã¾ã—ãŸã€‚

- ãƒ†ãƒ•ãƒ­ãƒ³ã®ç™ºè¦‹ï¼ˆãƒ­ã‚¤ãƒ»ãƒ—ãƒ©ãƒ³ã‚±ãƒƒãƒˆã€1938å¹´ï¼‰ : ãƒ—ãƒ©ãƒ³ã‚±ãƒƒãƒˆã¯å†·åª’ã®ç ”ç©¶ä¸­ã«ã€ãƒ•ãƒƒç´ æ¨¹è„‚ï¼ˆå¾Œã®ãƒ†ãƒ•ãƒ­ãƒ³ï¼‰ãŒå®¹å™¨å†…ã§å¶ç„¶å›ºã¾ã£ãŸã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚ã“ã®ç‰©è³ªã¯æ»‘ã‚Šã‚„ã™ãã€è€ç†±æ€§ã‚„è€è–¬å“æ€§ã«å„ªã‚Œã¦ãŠã‚Šã€èª¿ç†å™¨å…·ã‚„å·¥æ¥­ç”¨é€”ã§åºƒãä½¿ã‚ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

- ã‚µãƒƒã‚«ãƒªãƒ³ã®ç™ºè¦‹ï¼ˆã‚³ãƒ³ã‚¹ã‚¿ãƒ³ãƒ†ã‚£ãƒ³ãƒ»ãƒ•ã‚¡ãƒ¼ãƒ«ãƒãƒ¼ã‚°ã€1879å¹´ï¼‰ : ãƒ•ã‚¡ãƒ¼ãƒ«ãƒãƒ¼ã‚°ã¯ã‚³ãƒ¼ãƒ«ã‚¿ãƒ¼ãƒ«ã®ç ”ç©¶ä¸­ã«ã€èª¤ã£ã¦æ‰‹ã‚’æ´—ã‚ãšã«é£Ÿäº‹ã‚’ã—ã€ç”˜ã„å‘³ã«æ°—ã¥ãã¾ã—ãŸã€‚ã“ã®å¶ç„¶ã‹ã‚‰äººå·¥ç”˜å‘³æ–™ã‚µãƒƒã‚«ãƒªãƒ³ãŒç™ºè¦‹ã•ã‚Œã¾ã—ãŸã€‚

- é›»ç£èª˜å°ã®æ³•å‰‡ï¼ˆãƒã‚¤ã‚±ãƒ«ãƒ»ãƒ•ã‚¡ãƒ©ãƒ‡ãƒ¼ã€1831å¹´ï¼‰ : ãƒ•ã‚¡ãƒ©ãƒ‡ãƒ¼ã¯ã€ç£çŸ³ã‚’ã‚³ã‚¤ãƒ«ã«é€šã™å®Ÿé¨“ä¸­ã«ã€æ„å›³ã›ãšé›»æµãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã‚’ç™ºè¦‹ã€‚ã“ã®å¶ç„¶ã®è¦³å¯ŸãŒé›»ç£èª˜å°ã®æ³•å‰‡ã‚’ç¢ºç«‹ã—ã€ç™ºé›»æ©Ÿã‚„å¤‰åœ§å™¨ã®åŸºç¤ã¨ãªã‚Šã¾ã—ãŸã€‚

Céƒ¨é•·ï¼š â€œã“ã‚Œï¼ˆâ†‘ï¼‰ã¯ã€AIã§èª¿ã¹ã¾ã—ãŸã€‚AIãŒã§ããªã„ç™ºè¦‹ã‚„ç™ºæ˜ã‚‚ã€æ²¢å±±ã‚ã‚‹ã‚“ã§ã™ã‚ˆã€‚ã“ã‚Œã‹ã‚‰ã‚‚ãƒ»ãƒ»ãƒ»ã€‚â€
